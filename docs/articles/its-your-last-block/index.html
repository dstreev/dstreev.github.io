<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">

  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"/>

  <title>It&#39;s your last block!!!</title>
  <meta name="author" content="" />
  <meta name="description"
        content="In a few other articles, I&rsquo;ll talk about bringing hosts down to facilitate upgrades.

If you do this at rack at a time, it may also lead to data loss if any other drive in the system fails..."/>


  <meta name="generator" content="Hugo 0.58.3" />

  
  <meta itemprop="name" content="It&#39;s your last block!!!"/>
  <meta itemprop="description"
        content="In a few other articles, I&rsquo;ll talk about bringing hosts down to facilitate upgrades.

If you do this at rack at a time, it may also lead to data loss if any other drive in the system fails..."/>
  <meta itemprop="image"
        content=""/>

  
  <meta property="og:title" content="It&#39;s your last block!!!"/>
  <meta property="og:type"
        content="article"/>
  <meta property="og:url" content="http://www.streever.com/docs/articles/its-your-last-block/"/>
  <meta property="og:image"
        content=""/>
  <meta property="og:description"
        content="In a few other articles, I&rsquo;ll talk about bringing hosts down to facilitate upgrades.

If you do this at rack at a time, it may also lead to data loss if any other drive in the system fails..."/>
  <meta property="og:site_name" content="David W. Streever"/>
  <meta property="article:published_time"
        content="2018-04-16T00:00:00&#43;00:00"/>
  <meta property="article:section" content="articles"/>
  <meta property="article:tag" content="hdfs"/>

  
  
  <meta name="twitter:card" content="summary"/>
  <meta name="twitter:site"
        content=""/>
  <meta name="twitter:title" content="It&#39;s your last block!!!"/>
  <meta name="twitter:description"
        content="In a few other articles, I&rsquo;ll talk about bringing hosts down to facilitate upgrades.

If you do this at rack at a time, it may also lead to data loss if any other drive in the system fails..."/>
  <meta name="twitter:creator"
        content=""/>
  <meta name="twitter:image:src"
        content=""/>

  

  
  <link rel="stylesheet" type="text/css" href="/css/capsule.min.css"/>
  
  

  
  </head>


  <body style="min-height:100vh;display:flex;flex-direction:column">

    <nav class="navbar has-shadow is-white"
     role="navigation" aria-label="main navigation">
  <div class="container">

    <div class="navbar-brand">
      <a class="navbar-item" href="/">
        <div class="title is-4">&nbsp;David W. Streever</div>
      </a>

      
      <label class="button navbar-burger is-white" for="navbar-burger-state">
        <span></span>                               
        <span></span>
        <span></span>
      </label>
    </div>

    
    <input type="checkbox" id="navbar-burger-state"/>

    <div class="navbar-menu">
      <div class="navbar-end">
      </div>
    </div>

  </div>
</nav>


    <section class="section" style="flex:1">

      
      <div class="container">
        <p class="title">It&#39;s your last block!!!</p>
        <p class="subtitle">Apr 16, 2018</p>

        

        
        <div class="content">
          <p>In a few other articles, I&rsquo;ll talk about bringing hosts down to facilitate upgrades.</p>

<p>If you do this at rack at a time, it may also lead to data loss if any other drive in the system fails during the operation.  That&rsquo;s because the rules for replication when setting to 3 will place the second and third blocks on the same rack.  The first block becomes the only viable source.  If a drive fails, that contains this single block, the file will become corrupt.  Restoring the data directories will fix the block issue, restoring the integrity of the file.  But, jobs that depend on this file during the time it was corrupt/unavailable will fail.</p>

<p>If critical jobs can&rsquo;t handle this risk, identify the supporting files/directories and increase the replication factor for the duration of the upgrade process to ensure you have adequate replicas available.</p>

        </div>

        

        
<br>
<div class="heading">Categories:</div>
<div class="field is-grouped is-grouped-multiline">
  <div class="control">
    <a href="/docs/categories/hadoop">
      <span class="tag">Hadoop</span>
    </a>
  </div>
</div>
<div class="heading">Tags:</div>
<div class="field is-grouped is-grouped-multiline">
  <div class="control">
    <a href="/docs/tags/hdfs">
      <span class="tag">Hdfs</span>
    </a>
  </div>
</div>

      </div>

    </section>

    <section class="section">
      
      <div class="container">
  <div class="level">

    <div class="level-left">
      <div class="level-item">
        <p class="control has-addons">
          <a class="button" href="http://www.streever.com/docs/articles/rhel/centos-6-to-7-in-place-upgrades-with-hdp/">
            <span class="icon is-small"><i class="fa fa-chevron-left"></i></span>
            <span class="is-hidden-touch is-hidden-desktop-only">
              RHEL/CentOS 6 to 7 in-place upgrades with HDP
            </span>
            <span class="is-hidden-touch is-hidden-widescreen">
              RHEL/CentOS 6 to 7 in-place upgrades with HDP
            </span>
            <span class="is-hidden-mobile is-hidden-desktop">
              RHEL/CentOS 6 to 7 in-place upgrades with HDP
            </span>
            <span class="is-hidden-tablet">
              RHEL/CentOS 6 to 7 in-place upgrades...
            </span>
            
          </a>
        </p>
      </div>
    </div>

    <div class="level-right">
      <div class="level-item">
        <p class="control has-addons">
          <a class="button" href="#" disabled>
            <span>Oldest</span>
            <span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
          </a>
        </p>
      </div>
    </div>

  </div>
</div>


      <br>

      
      

      <br>

      
      

    </section>

    <footer class="footer">
  <div class="container">
    <nav class="level">

      <div class="level-item has-text-centered">
        <a href="http://www.streever.com/docs/articles/" class="heading">
          <span class="header">Articles</span>
        </a>
      </div>

    </nav>

    <nav class="level">

      <div class="level-left has-text-centered">
        <div class="level-item">
          <form class="control has-icon has-icon-right" method="get"
                action="https://duckduckgo.com">
            <input class="input" type="text" name="q" maxlength="255"
                   placeholder="Search">
            <input class="input" type="hidden" name="sites" value="http://www.streever.com/docs/">
            <span class="icon is-small"><i class="fa fa-search"></i></span>
          </form>
        </div>
      </div>

      <div class="level-right has-text-centered">
        <div class="level-item">

          <a class="button" href="http://www.streever.com/docs/">
            <span class="icon"><i class="fa fa-home"></i></span>
          </a> &nbsp;

          

          <a class="button" href="http://www.streever.com/docs/index.xml">
            <span class="icon"><i class="fa fa-rss"></i></span>
          </a>

        </div>
      </div>

    </nav>
  </div>
</footer>

  </body>

</html>
