<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2024-08-21T13:28:12.733569"><title>Hive Conversions | hms-mirror</title><script type="application/json" id="virtual-toc-data">[{"id":"hive-1-2-table-types-history","level":0,"title":"Hive 1/2 Table Types History","anchor":"#hive-1-2-table-types-history"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b408/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Hive Conversions | hms-mirror"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="hms-mirror Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/hms-mirror/v2.2.0.x/hive-conversions.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Hive Conversions | hms-mirror"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/hms-mirror/v2.2.0.x/hive-conversions.html#webpage",
    "url": "writerside-documentation/hms-mirror/v2.2.0.x/hive-conversions.html",
    "name": "Hive Conversions | hms-mirror",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/hms-mirror/#website",
    "url": "writerside-documentation/hms-mirror/",
    "name": "hms-mirror Help"
}</script><!-- End Schema.org --></head><body data-id="Hive-Conversions" data-main-title="Hive Conversions" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs=""><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>hms-mirror v2.2.0.x Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Hive-Conversions" id="Hive-Conversions.md">Hive Conversions</h1><p id="-5z7aoc_3">Hive has gone through a lot of changes as it's evolved over the last several years. Especially between Hive 1/2 and Hive 3. The default syntax used to 'create' tables hasn't changed, but the resulting table structure may have.</p><p id="-5z7aoc_4">Understand those changes and what hive flags are available to help influence that structure aren't very clear to even the most seasoned Hive user.</p><p id="-5z7aoc_5"><code class="code" id="-5z7aoc_11">hms-mirror</code> uses settings in the 'cluster' configuration to influence <span class="control" id="-5z7aoc_12">how</span> tables are translated during the migration.</p><div class="tabs" id="-5z7aoc_6" data-anchors="[cli,webui]"><div class="tabs__content" data-gtm="tab" id="webui" data-title="Web Interface"><p>Set the properties in the appropriate cluster configuration(s) for your strategy. </p><figure id="-5z7aoc_15"><img alt="cluster_tabs.png" src="images/cluster_tabs.png" title="cluster_tabs.png" width="2068" height="254"></figure><p id="-5z7aoc_16">Set the flags that match you cluster's Hive version.</p><figure id="-5z7aoc_17"><img alt="hive_version_flags.png" src="images/hive_version_flags.png" title="hive_version_flags.png" width="686" height="746"></figure></div><div class="tabs__content" data-gtm="tab" id="cli" data-title="CLI"><p>Modify the `hms-mirror` configuration to include the following settings: </p><div class="code-block" data-lang="yaml" data-title="yaml">
clusters:
  LEFT|RIGHT:
    legacyHive: true|false
    hdpHive3:   true|false
</div></div></div><p id="-5z7aoc_7">If you were upgrading in-place a Hive 1/2 cluster to Hive 3, the Hive upgrade process would convert 'legacy' managed tables to 'EXTERNAL' tables and add a 'PURGE' flag in the table properties so that tables behavior remains consistent with the original Hive 1/2 behavior while also being a compatible Hive 3 table.</p><p id="-5z7aoc_8">Managed non-ACID tables are NOT a valid state in Hive 3.</p><p id="-5z7aoc_9">With the properties set in the configuration for the cluster (above), <code class="code" id="-5z7aoc_19">hms-mirror</code> will make these conversions for you, in the same way that the Hive upgrade process would.</p><section class="chapter"><h2 id="hive-1-2-table-types-history" data-toc="hive-1-2-table-types-history">Hive 1/2 Table Types History</h2><p id="-5z7aoc_20">Tables in Hive 1/2 are typically 'external' tables. This means that the data is managed independently of the Hive Metastore. The table definition in the Hive Metastore points to the location of the data but does NOT manage the data. In this case, if you drop the table (or a partition), the data remains on the filesystem. These are created with the <code class="code" id="-5z7aoc_27">CREATE EXTERNAL TABLE</code> command.</p><p id="-5z7aoc_21">Another table type in Hive 1/2 is the 'managed' table. This is where Hive manages the data. If you drop the table (or partition), Hive will clean up the data on the filesystem. These are created with the <code class="code" id="-5z7aoc_28">CREATE TABLE</code> command.</p><p id="-5z7aoc_22">There is also a variant of the 'managed' table that is ACID compliant. These are created with the <code class="code" id="-5z7aoc_29">CREATE TABLE</code> command with table properties that enable ACID characteristics <code class="code" id="-5z7aoc_30">transactional=true</code>. These tables have special characteristics and are not friendly to the 'schema on read' paradigm, since these tables are 'schema on write' and embed special columns in the data files.</p><p id="-5z7aoc_23">Starting with Hive 3, the default behavior of the <code class="code" id="-5z7aoc_31">CREATE TABLE</code> command is to create a 'managed' ACID table. The additional table properties for a 'transactional' table are no longer required to create an ACID table. This is a significant change from Hive 1/2.</p><p id="-5z7aoc_24">There is a web application that allows you to experiment with various commands and settings, showing the resulting table structures.</p><p id="-5z7aoc_25">Regardless, use the following web application to help you quickly through the trial and error phase of understanding these new structural and session settings.</p><p id="-5z7aoc_26"><a href="https://dstreev.github.io/hive/create_path.html" id="-5z7aoc_32" data-external="true" rel="noopener noreferrer">Hive Create Path</a></p></section><div class="last-modified">Last modified: 21 August 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="environment-warehouse.html" class="navigation-links__prev">Environment Warehouse</a><a href="hms-mirror-features.html" class="navigation-links__next">Features</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b408/app.js"></script></body></html>