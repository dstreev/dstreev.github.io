<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2024-11-21T10:04:52.451795"><title>Index of Settings | hms-mirror</title><script type="application/json" id="virtual-toc-data">[{"id":"copy-avro-schema-urls","level":0,"title":"Copy Avro Schema Urls","anchor":"#copy-avro-schema-urls"},{"id":"data-strategy","level":0,"title":"Data Strategy","anchor":"#data-strategy"},{"id":"database-only","level":0,"title":"Database Only","anchor":"#database-only"},{"id":"dump-test-data","level":0,"title":"Dump Test Data","anchor":"#dump-test-data"},{"id":"load-test-data-file","level":0,"title":"Load Test Data File","anchor":"#load-test-data-file"},{"id":"skip-link-check","level":0,"title":"Skip Link Check","anchor":"#skip-link-check"},{"id":"database-prefix","level":0,"title":"Database Prefix","anchor":"#database-prefix"},{"id":"database-rename","level":0,"title":"Database Rename","anchor":"#database-rename"},{"id":"execute","level":0,"title":"Execute","anchor":"#execute"},{"id":"output-directory","level":0,"title":"Output Directory","anchor":"#output-directory"},{"id":"encrypted-passwords","level":0,"title":"Encrypted Passwords","anchor":"#encrypted-passwords"},{"id":"read-only","level":0,"title":"Read-Only","anchor":"#read-only"},{"id":"skip-features","level":0,"title":"Skip Features","anchor":"#skip-features"},{"id":"transfer-ownership","level":0,"title":"Transfer Ownership","anchor":"#transfer-ownership"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b518/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Index of Settings | hms-mirror"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="hms-mirror Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/hms-mirror/v2.2.0.x/index-of-settings.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Index of Settings | hms-mirror"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/hms-mirror/v2.2.0.x/index-of-settings.html#webpage",
    "url": "writerside-documentation/hms-mirror/v2.2.0.x/index-of-settings.html",
    "name": "Index of Settings | hms-mirror",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/hms-mirror/#website",
    "url": "writerside-documentation/hms-mirror/",
    "name": "hms-mirror Help"
}</script><!-- End Schema.org --></head><body data-id="Index-of-Settings" data-main-title="Index of Settings" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs=""><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>hms-mirror v2.2.0.x Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Index-of-Settings" id="Index-of-Settings.md">Index of Settings</h1><section class="chapter"><h2 id="copy-avro-schema-urls" data-toc="copy-avro-schema-urls">Copy Avro Schema Urls</h2><div class="tabs" id="mu3690_17" data-anchors="[mu3690_18,mu3690_19,mu3690_20]"><div class="tabs__content" data-gtm="tab" id="mu3690_18" data-title="CLI"><p id="mu3690_21"><code class="code" id="mu3690_22">-asm,--avro-schema-migration</code> Migrate AVRO Schema Files referenced in TBLPROPERTIES by 'avro.schema.url'. Without migration it is expected that the file will exist on the other cluster and match the 'url' defined in the schema DDL. If it's not present, schema creation will FAIL. Specifying this option REQUIRES the LEFT and RIGHT cluster to be LINKED. See docs: https://github.com/cloudera-labs/hms-mirror#linking-clusters-storage-layers</p></div><div class="tabs__content" data-gtm="tab" id="mu3690_19" data-title="Web UI"><figure id="mu3690_23"><img alt="attrib_misc.png" src="images/attrib_misc.png" title="attrib_misc.png" width="470" height="568"></figure></div><div class="tabs__content" data-gtm="tab" id="mu3690_20" data-title="Config File"><p id="mu3690_24"><code class="code" id="mu3690_26">copyAvroSchemaUrls</code> is a boolean value that determines if the Avro schema URLs should be copied from the source to the target. This is useful if you're using Avro schemas in your source and target environments and want to maintain the same schema URLs in both environments. The default value is <code class="code" id="mu3690_27">false</code>.</p><div class="code-block" data-lang="yaml" data-title="yaml">
copyAvroSchemaUrls: true|false
</div></div></div></section><section class="chapter"><h2 id="data-strategy" data-toc="data-strategy">Data Strategy</h2><p id="mu3690_28">Data Strategy controls how schemas and data are migrated. The following values are supported:</p><ul class="list _bullet" id="mu3690_29"><li class="list__item" id="mu3690_31"><p>SCHEMA_ONLY</p></li><li class="list__item" id="mu3690_32"><p>SQL</p></li><li class="list__item" id="mu3690_33"><p>EXPORT_IMPORT</p></li><li class="list__item" id="mu3690_34"><p>HYBRID</p></li><li class="list__item" id="mu3690_35"><p>DUMP</p></li><li class="list__item" id="mu3690_36"><p>STORAGE_MIGRATION</p></li><li class="list__item" id="mu3690_37"><p>COMMON</p></li><li class="list__item" id="mu3690_38"><p>LINKED</p></li></ul><div class="tabs" id="mu3690_30" data-anchors="[mu3690_39,mu3690_40,mu3690_41]"><div class="tabs__content" data-gtm="tab" id="mu3690_39" data-title="CLI"><p id="mu3690_42"><code class="code" id="mu3690_43">-d|--data-strategy &lt;strategy&gt;</code> 'strategy' is one of the strategies listed above.</p></div><div class="tabs__content" data-gtm="tab" id="mu3690_40" data-title="Web UI"><p id="mu3690_44">The Web UI approaches this setting a little differently. When you 'initialized' a migration session, you'll be asked to select a 'Data Strategy' from a drop-down list. Saved sessions will have the 'data-strategy' embedded in them and is NOT editable. You 'can' create a new session based on an existing session and maintain most of the properties of the original session.</p><figure id="mu3690_45"><img alt="init_data-strategy.png" src="images/init_data-strategy.png" title="init_data-strategy.png" width="1119" height="277"></figure></div><div class="tabs__content" data-gtm="tab" id="mu3690_41" data-title="Config File"><div class="code-block" data-lang="yaml" data-title="yaml">
dataStrategy: &quot;SCHEMA_ONLY|SQL|EXPORT_IMPORT|HYBRID|DUMP|STORAGE_MIGRATION|COMMON|LINKED&quot;
</div></div></div></section><section class="chapter"><h2 id="database-only" data-toc="database-only">Database Only</h2><p id="mu3690_47">When set we'll only migrate the database objects and not the tables.</p><div class="tabs" id="mu3690_48" data-anchors="[mu3690_49,mu3690_50,mu3690_51]"><div class="tabs__content" data-gtm="tab" id="mu3690_49" data-title="CLI"><p id="mu3690_52"><code class="code" id="mu3690_53">-dbo|--database-only</code> will only migrate the database objects and not the tables.</p></div><div class="tabs__content" data-gtm="tab" id="mu3690_50" data-title="Web UI"><figure id="mu3690_54"><img alt="attrib_misc.png" src="images/attrib_misc.png" title="attrib_misc.png" width="470" height="568"></figure></div><div class="tabs__content" data-gtm="tab" id="mu3690_51" data-title="Config File"><div class="code-block" data-lang="yaml" data-title="yaml">
  databaseOnly: true|false
</div></div></div></section><section class="chapter"><h2 id="dump-test-data" data-toc="dump-test-data">Dump Test Data</h2><p id="mu3690_56">Dumping test data uses the running configuration to create a processable artifact that can be used for testing offline.</p><div class="tabs" id="mu3690_57" data-anchors="[mu3690_58,mu3690_59,mu3690_60]"><div class="tabs__content" data-gtm="tab" id="mu3690_58" data-title="CLI"><p id="mu3690_61"><code class="code" id="mu3690_62">dtd|--dump-test-data</code> will dump an artifact that can be used for testing offline.</p></div><div class="tabs__content" data-gtm="tab" id="mu3690_59" data-title="Web UI"><p id="mu3690_63">Not an option in the Web UI.</p></div><div class="tabs__content" data-gtm="tab" id="mu3690_60" data-title="Config File"><div class="code-block" data-lang="yaml" data-title="yaml">
  dumpTestData: true|false
</div></div></div></section><section class="chapter"><h2 id="load-test-data-file" data-toc="load-test-data-file">Load Test Data File</h2><p id="mu3690_65">Run the process with a test data file that was created with the <code class="code" id="mu3690_67">--dump-test-data</code> option.</p><div class="tabs" id="mu3690_66" data-anchors="[mu3690_68,mu3690_69,mu3690_70]"><div class="tabs__content" data-gtm="tab" id="mu3690_68" data-title="CLI"><p id="mu3690_71"><code class="code" id="mu3690_72">-ltd|--load-test-data</code> will load the test data file that was created with the <code class="code" id="mu3690_73">--dump-test-data</code> option.</p></div><div class="tabs__content" data-gtm="tab" id="mu3690_69" data-title="Web UI"><p id="mu3690_74">Not an option in the Web UI.</p></div><div class="tabs__content" data-gtm="tab" id="mu3690_70" data-title="Config File"><div class="code-block" data-lang="yaml" data-title="yaml">
  loadTestDataFile: &quot;&lt;path_to_test_data_file&gt;&quot;
</div></div></div></section><section class="chapter"><h2 id="skip-link-check" data-toc="skip-link-check">Skip Link Check</h2><p id="mu3690_76">When there are issues connecting to the source or target cluster storage systems, you can skip the link check. <br> Doing so may mean that certain features will not work as expected. EG: Limits used to determine processing that need to review the storage layer or the ability to copy Avro schema files or optimizations made based on file</p><div class="tabs" id="mu3690_77" data-anchors="[mu3690_79,mu3690_80,mu3690_81]"><div class="tabs__content" data-gtm="tab" id="mu3690_79" data-title="CLI"><p id="mu3690_82"><code class="code" id="mu3690_83">-slc|--skip-link-check</code> will skip the link check.</p></div><div class="tabs__content" data-gtm="tab" id="mu3690_80" data-title="Web UI"><figure id="mu3690_84"><img alt="attrib_misc.png" src="images/attrib_misc.png" title="attrib_misc.png" width="470" height="568"></figure></div><div class="tabs__content" data-gtm="tab" id="mu3690_81" data-title="Config File"><p id="mu3690_85">Default is <code class="code" id="mu3690_87">false</code>.</p><div class="code-block" data-lang="yaml" data-title="yaml">
  skipLinkCheck: true|false
</div></div></div></section><section class="chapter"><h2 id="database-prefix" data-toc="database-prefix">Database Prefix</h2><p id="mu3690_88"><code class="code" id="mu3690_90">dbPrefix</code> is a value to pre-pend to the database name when creating the database in the target cluster. This is way to avoid conflicts with existing databases in the target cluster. The default value is an empty string.</p><div class="code-block" data-lang="yaml">
  dbPrefix: &quot;&lt;prefix&gt;&quot;
</div></section><section class="chapter"><h2 id="database-rename" data-toc="database-rename">Database Rename</h2><p id="mu3690_91"><code class="code" id="mu3690_93">dbRename</code> is a string value that identifies the new name of the database in the target cluster. This is useful for testing a single database migration to an alternate database in the target cluster. This is only valid for a single database migration.</p><div class="code-block" data-lang="yaml">
  dbRename: &quot;&lt;new_db_name&gt;&quot;
</div></section><section class="chapter"><h2 id="execute" data-toc="execute">Execute</h2><p id="mu3690_94"><code class="code" id="mu3690_97">execute</code> is a boolean value that determines if the migration should be executed. The default value is <code class="code" id="mu3690_98">false</code>, which is the dry-run mode. In the 'dry-run' mode, all the reports are generated and none of the actual migration is done.</p><aside class="prompt" data-type="tip" data-title="" id="mu3690_95"><p>You should ALWAYS run a 'dry-run' before executing a migration. This will give you a good idea of what will be done and provide you with the reports to review.</p></aside><div class="code-block" data-lang="yaml">
  execute: true|false
</div></section><section class="chapter"><h2 id="output-directory" data-toc="output-directory">Output Directory</h2><p id="mu3690_99">Output directory is a string value that identifies the directory where the reports will be written. The default is <code class="code" id="mu3690_101">$HOME/.hms-mirror/reports</code>. When this value is defined, the reports will be written to the specified output directory with the timestamp as the 'name' of the report.</p><div class="tabs" id="mu3690_100" data-anchors="[mu3690_102,mu3690_103,mu3690_104]"><div class="tabs__content" data-gtm="tab" id="mu3690_102" data-title="CLI"><p id="mu3690_105"><code class="code" id="mu3690_106">-o|--output-dir &lt;path_to_output_directory&gt;</code> will set the output directory.</p></div><div class="tabs__content" data-gtm="tab" id="mu3690_103" data-title="Web UI"><p id="mu3690_107">Not available in the Web UI.</p></div><div class="tabs__content" data-gtm="tab" id="mu3690_104" data-title="Config File"><div class="code-block" data-lang="yaml" data-title="yaml">
  outputDirectory: &quot;&lt;path_to_output_directory&gt;&quot;
</div></div></div></section><section class="chapter"><h2 id="encrypted-passwords" data-toc="encrypted-passwords">Encrypted Passwords</h2><p id="mu3690_109"><code class="code" id="mu3690_111">encryptedPasswords</code> is a boolean value that determines if the passwords in the configuration file are encrypted.</p><div class="code-block" data-lang="yaml">
  encryptedPasswords: true|false
</div></section><section class="chapter"><h2 id="read-only" data-toc="read-only">Read-Only</h2><p id="mu3690_112">Read-Only is a boolean value that determines if the migration should be read-only. The default value is <code class="code" id="mu3690_115">false</code>. <br> When this value is set to <code class="code" id="mu3690_117">true</code>, table schema's created will not have a 'purge' flag set to ensure they can't drop data. This is useful for testing migrations and for DR scenarios where you want to limit the exposure of potential changes on the target cluster.</p><aside class="prompt" data-type="warning" data-title="" id="mu3690_113"><p>This does NOT prevent data from being manipulated on the target cluster after the migration.</p></aside><div class="tabs" id="mu3690_114" data-anchors="[mu3690_118,mu3690_119,mu3690_120]"><div class="tabs__content" data-gtm="tab" id="mu3690_118" data-title="CLI"><p id="mu3690_121"><code class="code" id="mu3690_122">-ro|--read-only</code> will set the migration to read-only.</p></div><div class="tabs__content" data-gtm="tab" id="mu3690_119" data-title="Web UI"></div><div class="tabs__content" data-gtm="tab" id="mu3690_120" data-title="Config File"><div class="code-block" data-lang="yaml" data-title="yaml">
  readOnly: true|false
</div></div></div></section><section class="chapter"><h2 id="skip-features" data-toc="skip-features">Skip Features</h2><p id="mu3690_124">Skip Features is a boolean value that is <code class="code" id="mu3690_126">false</code> by default so feature check will be made. Features are a framework of checks that examine a table definition and make corrections to it to ensure it's compatible with the target cluster. We've found several circumstances where definitions extracted from the source cluster can NOT be replayed on the target cluster for some reason. These features attempt to correct those issues during the migration.</p><div class="tabs" id="mu3690_125" data-anchors="[mu3690_127,mu3690_128,mu3690_129]"><div class="tabs__content" data-gtm="tab" id="mu3690_127" data-title="CLI"><p id="mu3690_130"><code class="code" id="mu3690_131">-sf|--skip-features</code> will skip the feature checks.</p></div><div class="tabs__content" data-gtm="tab" id="mu3690_128" data-title="Web UI"></div><div class="tabs__content" data-gtm="tab" id="mu3690_129" data-title="Config File"><div class="code-block" data-lang="yaml" data-title="yaml">
  skipFeatures: true|false
</div></div></div></section><section class="chapter"><h2 id="transfer-ownership" data-toc="transfer-ownership">Transfer Ownership</h2><p id="mu3690_133">You can choose to transfer ownership of objects from the source to target clusters. Ownership is defined as the <code class="code" id="mu3690_136">owner</code> of the database or table in the metastore. This is useful if you are using Ranger policies that rely on the owner of the object.</p><aside class="prompt" data-type="warning" data-title="" id="mu3690_134"><p>The user running the migration commands will need permissions to make these settings to the table. This would include the ability to `ALTER` the target table. If you're using Ranger, please run some test with the user in beeline to ensure there isn't an issue when running the process.</p></aside><div class="tabs" id="mu3690_135" data-anchors="[mu3690_137,mu3690_138,mu3690_139]"><div class="tabs__content" data-gtm="tab" id="mu3690_137" data-title="CLI"><p id="mu3690_140"><code class="code" id="mu3690_143">-to|--transfer-ownership</code> will transfer ownership of databases and tables from the source to the target cluster.</p><p id="mu3690_141"><code class="code" id="mu3690_144">-todb|--transfer-ownership-database</code> will transfer ownership of databases from the source to the target cluster.</p><p id="mu3690_142"><code class="code" id="mu3690_145">-totbl|--transfer-ownership-table</code> will transfer ownership of tables from the source to the target cluster.</p></div><div class="tabs__content" data-gtm="tab" id="mu3690_138" data-title="Web UI"><figure id="mu3690_146"><img alt="attrib_misc.png" src="images/attrib_misc.png" title="attrib_misc.png" width="470" height="568"></figure></div><div class="tabs__content" data-gtm="tab" id="mu3690_139" data-title="Config File"><div class="code-block" data-lang="yaml" data-title="yaml">
  ownershipTransfer:
    database: true|false
    table: true|false
</div></div></div></section><div class="last-modified">Last modified: 21 November 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="hms-mirror-iceberg-migration.html" class="navigation-links__prev">ICEBERG_MIGRATION</a><a href="migrate-tables.html" class="navigation-links__next">Migrate Options</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b518/app.js"></script></body></html>