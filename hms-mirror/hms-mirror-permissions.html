<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2024-08-15T11:41:21.207642"><title>Permissions | hms-mirror</title><script type="application/json" id="virtual-toc-data">[]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b408/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Permissions | hms-mirror"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="hms-mirror Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/hms-mirror/v2.2.0.x/hms-mirror-permissions.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Permissions | hms-mirror"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/hms-mirror/v2.2.0.x/hms-mirror-permissions.html#webpage",
    "url": "writerside-documentation/hms-mirror/v2.2.0.x/hms-mirror-permissions.html",
    "name": "Permissions | hms-mirror",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/hms-mirror/#website",
    "url": "writerside-documentation/hms-mirror/",
    "name": "hms-mirror Help"
}</script><!-- End Schema.org --></head><body data-id="hms-mirror-permissions" data-main-title="Permissions" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Pre-Requisites.md|Pre-Requisites"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>hms-mirror v2.2.0.x Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="hms-mirror-permissions" id="hms-mirror-permissions.md">Permissions</h1><p id="pzx1hy_3">In both the METADATA and STORAGE phases of <code class="code" id="pzx1hy_11">hms-mirror</code> the RIGHT cluster will reach down into the LEFT clusters storage layer to either <span class="emphasis" id="pzx1hy_12">use</span> or <span class="emphasis" id="pzx1hy_13">copy</span> the data.</p><p id="pzx1hy_4"><code class="code" id="pzx1hy_14">hms-mirror</code> access each cluster via JDBC and use the RIGHT cluster for <span class="emphasis" id="pzx1hy_15">storage</span> layer access.</p><p id="pzx1hy_5">When the RIGHT cluster is using 'non-impersonation' (hive <code class="code" id="pzx1hy_16">doas=false</code>), the <span class="emphasis" id="pzx1hy_17">hive</span> service account on the <span class="control" id="pzx1hy_18">RIGHT</span> cluster (usually <code class="code" id="pzx1hy_19">hive</code>) needs access to the storage layer on the <span class="control" id="pzx1hy_20">LEFT</span> cluster to use this data to support sidecar testing, where we use the data of the LEFT cluster but <span class="emphasis" id="pzx1hy_21">mirror</span> the metadata.</p><aside class="prompt" data-type="tip" data-title="" id="pzx1hy_6"><p id="pzx1hy_22">Having Ranger on both clusters helps because you can create additional ACLs to provide the access required.</p></aside><p id="pzx1hy_7"><span class="control" id="pzx1hy_23">OR</span></p><aside class="prompt" data-type="tip" data-title="" id="pzx1hy_8"><p id="pzx1hy_24">Checked permissions of '&lt;submitting_user&gt;': Found that the '&lt;submitting_user&gt;' user was NOT the owner of the files in these directories. The user running the process needs to be in 'dfs.permissions.superusergroup' for the LEFT clusters 'hdfs' service. Ambari 2.6 has issues setting this property: https://jira.cloudera.com/browse/EAR-7805</p></aside><aside class="prompt" data-type="tip" data-title="" id="pzx1hy_9"><p id="pzx1hy_25">Follow workaround above or add user to the 'hdfs' group. I had to use '/var/lib/ambari-server/resources/scripts/configs.py' to set it manually for Ambari.</p></aside><aside class="prompt" data-type="tip" data-title="" id="pzx1hy_10"><p id="pzx1hy_26"><code class="code" id="pzx1hy_27">sudo ./configs.py --host=k01.streever.local --port=8080 -u admin -p admin -n hdp50 -c hdfs-site -a set -k dfs.permissions.superusergroup -v hdfs_admin</code></p></aside><div class="last-modified">Last modified: 15 August 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="warning.html" class="navigation-links__prev">Warning</a><a href="linking-cluster-storage-layers.html" class="navigation-links__next">Linking Cluster Storage Layers</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b408/app.js"></script></body></html>