<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-04-14T12:55:18.525505"><title>Release Notes | hms-mirror</title><script type="application/json" id="virtual-toc-data">[{"id":"known-issues","level":0,"title":"Known Issues","anchor":"#known-issues"},{"id":"enhancement-requests","level":0,"title":"Enhancement Requests","anchor":"#enhancement-requests"},{"id":"3-0-0-1","level":0,"title":"3.0.0.1","anchor":"#3-0-0-1"},{"id":"2-3-1-5","level":0,"title":"2.3.1.5","anchor":"#2-3-1-5"},{"id":"2-3-0-13","level":0,"title":"2.3.0.13","anchor":"#2-3-0-13"},{"id":"2-3-0-12","level":0,"title":"2.3.0.12","anchor":"#2-3-0-12"},{"id":"2-3-0-10","level":0,"title":"2.3.0.10","anchor":"#2-3-0-10"},{"id":"2-3-0-4","level":0,"title":"2.3.0.4","anchor":"#2-3-0-4"},{"id":"2-2-0-19-6-pre-release","level":0,"title":"2.2.0.19.6 (pre-release)","anchor":"#2-2-0-19-6-pre-release"},{"id":"2-2-0-19-2-pre-release","level":0,"title":"2.2.0.19.2 (pre-release)","anchor":"#2-2-0-19-2-pre-release"},{"id":"2-2-0-19-1","level":0,"title":"2.2.0.19.1","anchor":"#2-2-0-19-1"},{"id":"2-2-0-18-1","level":0,"title":"2.2.0.18.1","anchor":"#2-2-0-18-1"},{"id":"2-2-0-17-1","level":0,"title":"2.2.0.17.1","anchor":"#2-2-0-17-1"},{"id":"2-2-0-15-1","level":0,"title":"2.2.0.15.1","anchor":"#2-2-0-15-1"},{"id":"2-2-0-15","level":0,"title":"2.2.0.15","anchor":"#2-2-0-15"},{"id":"2-2-0-12","level":0,"title":"2.2.0.12","anchor":"#2-2-0-12"},{"id":"2-2-0-10","level":0,"title":"2.2.0.10","anchor":"#2-2-0-10"},{"id":"2-2-0-9","level":0,"title":"2.2.0.9","anchor":"#2-2-0-9"},{"id":"2-2-0-8","level":0,"title":"2.2.0.8","anchor":"#2-2-0-8"},{"id":"2-2-0-7","level":0,"title":"2.2.0.7","anchor":"#2-2-0-7"},{"id":"2-2-0-5","level":0,"title":"2.2.0.5","anchor":"#2-2-0-5"},{"id":"2-2-0-4","level":0,"title":"2.2.0.4","anchor":"#2-2-0-4"},{"id":"2-2-0-2","level":0,"title":"2.2.0.2","anchor":"#2-2-0-2"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b725/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Release Notes | hms-mirror"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="hms-mirror Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/hms-mirror/v2.3.1.x/release-notes.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Release Notes | hms-mirror"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/hms-mirror/v2.3.1.x/release-notes.html#webpage",
    "url": "writerside-documentation/hms-mirror/v2.3.1.x/release-notes.html",
    "name": "Release Notes | hms-mirror",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/hms-mirror/#website",
    "url": "writerside-documentation/hms-mirror/",
    "name": "hms-mirror Help"
}</script><!-- End Schema.org --></head><body data-id="Release-Notes" data-main-title="Release Notes" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs=""><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>hms-mirror v2.3.1.x Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Release-Notes" id="Release-Notes.md">Release Notes</h1><section class="chapter"><h2 id="known-issues" data-toc="known-issues">Known Issues</h2><p id="-h09pd1_26">The latest set of known issues can be found <a href="https://github.com/cloudera-labs/hms-mirror/issues?q=is%3Aissue+is%3Aopen+label%3Abug" id="-h09pd1_27" data-external="true" rel="noopener noreferrer">here</a></p></section><section class="chapter"><h2 id="enhancement-requests" data-toc="enhancement-requests">Enhancement Requests</h2><p id="-h09pd1_28">The latest set of enhancement requests can be found <a href="https://github.com/cloudera-labs/hms-mirror/issues?q=is%3Aissue+is%3Aopen+label%3Aenhancement" id="-h09pd1_30" data-external="true" rel="noopener noreferrer">here</a>.</p><p id="-h09pd1_29">If there is something you'd like to see, add a new issue <a href="https://github.com/cloudera-labs/hms-mirror/issues" id="-h09pd1_31" data-external="true" rel="noopener noreferrer">here</a></p></section><section class="chapter"><h2 id="3-0-0-1" data-toc="3-0-0-1">3.0.0.1</h2><p id="-h09pd1_32">This release is based on the 2.3.1.5 release and includes all the features and bug fixes from that release.</p><p id="-h09pd1_33">This is a Security and CVE release that has upgrading all dependencies to the latest possible versions to eliminate as many of the community CVEs as possible. This also required us to upgrade the minimum JDK version to 17.</p><p id="-h09pd1_34"><span class="control" id="-h09pd1_37">What's New</span></p><ul class="list _bullet" id="-h09pd1_35"><li class="list__item" id="-h09pd1_38"><p id="-h09pd1_39">JDK 17 Minimum Version Requirement. Addresses dependencies with CVE issues.</p></li></ul><p id="-h09pd1_36"><span class="control" id="-h09pd1_40">Bug Fixes</span> <a href="https://github.com/cloudera-labs/hms-mirror/issues/189" id="-h09pd1_41" data-external="true" rel="noopener noreferrer">--sync not dropping table on right when left is missing.</a></p></section><section class="chapter"><h2 id="2-3-1-5" data-toc="2-3-1-5">2.3.1.5</h2><p id="-h09pd1_42"><span class="control" id="-h09pd1_47">Bug Fixes</span></p><ul class="list _bullet" id="-h09pd1_43"><li class="list__item" id="-h09pd1_48"><p id="-h09pd1_52">Fixed Web UI session status preventing progress.</p></li><li class="list__item" id="-h09pd1_49"><p id="-h09pd1_53">Handle npe from SQL in-place downgrade of ACID tables.</p></li><li class="list__item" id="-h09pd1_50"><p id="-h09pd1_54">Fixed locale issue with set statements that used numeric values.</p></li><li class="list__item" id="-h09pd1_51"><p id="-h09pd1_55">Fixed floorDiv(long,int) to floorDiv(long,long) for Java8 compatibility.</p></li></ul><p id="-h09pd1_44"><span class="control" id="-h09pd1_56">What's New</span></p><ul class="list _bullet" id="-h09pd1_45"><li class="list__item" id="-h09pd1_57"><p id="-h09pd1_58">Add support to 'in-place' removal of bucket definitions from an ACID table</p></li></ul><p id="-h09pd1_46"><span class="control" id="-h09pd1_59">Note</span> This will be the last release in the 2.3.x branch with any feature enhancements. Future releases will be in the 3.x branch.</p></section><section class="chapter"><h2 id="2-3-0-13" data-toc="2-3-0-13">2.3.0.13</h2><p id="-h09pd1_60"><span class="control" id="-h09pd1_63">What's New</span></p><p id="-h09pd1_61"><a href="https://github.com/cloudera-labs/hms-mirror/issues/183" id="-h09pd1_64" data-external="true" rel="noopener noreferrer">Enhance logging to show which instance is handling a connection/job in case of using multiple HS2 instances</a></p><aside class="prompt" data-type="tip" data-title="" id="-h09pd1_62"><p id="-h09pd1_65">When using multiple HS2 instances, it can be difficult to determine which instance is handling a connection or job. This enhancement will allow you to add a <code class="code" id="-h09pd1_66">set</code> statement that identifies which instance is handling the connection or job. Use the <code class="code" id="-h09pd1_67">-po[r|l]</code> property override values if you'd like to include this information in the log output. <code class="code" id="-h09pd1_68">-po hive.server2.thrift.bind.host</code> will add the statement to both LEFT and RIGHT output. The option is also available in the Web UI through &quot;Property Overrides&quot;.</p></aside></section><section class="chapter"><h2 id="2-3-0-12" data-toc="2-3-0-12">2.3.0.12</h2><p id="-h09pd1_69"><span class="control" id="-h09pd1_71">Bug Fixes</span></p><p id="-h09pd1_70"><a href="https://github.com/cloudera-labs/hms-mirror/issues/182" id="-h09pd1_72" data-external="true" rel="noopener noreferrer">The Hikari Connection Pool settings are causing intermittent connection failures, cause table transfer failures.</a></p></section><section class="chapter"><h2 id="2-3-0-10" data-toc="2-3-0-10">2.3.0.10</h2><p id="-h09pd1_73"><span class="control" id="-h09pd1_85">Bug Fixes</span></p><p id="-h09pd1_74"><a href="https://github.com/cloudera-labs/hms-mirror/issues/181" id="-h09pd1_86" data-external="true" rel="noopener noreferrer">Second run in WebUI Fails</a></p><p id="-h09pd1_75"><a href="https://github.com/cloudera-labs/hms-mirror/issues/180" id="-h09pd1_87" data-external="true" rel="noopener noreferrer">dbRegEx not being processed. Throws MISC_ERROR because it can't find any databases.</a></p><p id="-h09pd1_76"><a href="https://github.com/cloudera-labs/hms-mirror/issues/179" id="-h09pd1_88" data-external="true" rel="noopener noreferrer">Legacy DBPROPERTIES are causing ERROR when attempting to set on CDP</a></p><p id="-h09pd1_77">Issue with jobs not completing when some schema's were already present.</p><p id="-h09pd1_78">Address lingering connections after run completes.</p><p id="-h09pd1_79">Fixed counters for CLI screen output.</p><p id="-h09pd1_80">Fixed an issue with tables being processed multiple times under some conditions.</p><p id="-h09pd1_81"><a href="https://github.com/cloudera-labs/hms-mirror/issues/178" id="-h09pd1_89" data-external="true" rel="noopener noreferrer">Partition discovery for SHADOW table when source is a Managed table shouldn't try to build partitions with ALTER</a></p><p id="-h09pd1_82"><a href="https://github.com/cloudera-labs/hms-mirror/issues/177" id="-h09pd1_90" data-external="true" rel="noopener noreferrer">LEFT side SQL when running 'execute' mode for SQL data strategy isn't being run.</a></p><p id="-h09pd1_83"><a href="https://github.com/cloudera-labs/hms-mirror/issues/176" id="-h09pd1_91" data-external="true" rel="noopener noreferrer">CLI App version fails when attempting to set 'concurrency' option</a></p><p id="-h09pd1_84"><a href="https://github.com/cloudera-labs/hms-mirror/issues/175" id="-h09pd1_92" data-external="true" rel="noopener noreferrer">MSCK for Shadow table not generated when 'metastore_direct' on the LEFT isn't defined</a></p></section><section class="chapter"><h2 id="2-3-0-4" data-toc="2-3-0-4">2.3.0.4</h2><p id="-h09pd1_93"><span class="control" id="-h09pd1_100">What's New</span></p><p id="-h09pd1_94">BETA Iceberg conversion support for the STORAGE_MIGRATION data strategy. See <a href="hms-mirror-iceberg-migration.html" id="-h09pd1_101" data-tooltip="This process will look at Hive tables, evaluate if the table is a candidate for migration to Iceberg, and then migrate the table to Iceberg.">Iceberg Conversion</a> for more details. To activate this beta feature for the WebUI, add <code class="code" id="-h09pd1_102">--hms-mirror. config.beta=true</code> to the startup command. EG: <code class="code" id="-h09pd1_103">hms-mirror --service --hms-mirror.config.beta=true</code></p><p id="-h09pd1_95"><span class="control" id="-h09pd1_104">Bugs (Fixed)</span></p><p id="-h09pd1_96"><a href="https://github.com/cloudera-labs/hms-mirror/issues/173" id="-h09pd1_105" data-external="true" rel="noopener noreferrer">Add to connection init the ability to set the queue AND trigger an engine resource</a></p><p id="-h09pd1_97"><a href="https://github.com/cloudera-labs/hms-mirror/issues/168" id="-h09pd1_106" data-external="true" rel="noopener noreferrer">Validate SQL elements before making changes to the Cluster</a></p><p id="-h09pd1_98"><a href="https://github.com/cloudera-labs/hms-mirror/issues/167" id="-h09pd1_107" data-external="true" rel="noopener noreferrer">Extend the HS2 connection validation with Tez task validation</a></p><p id="-h09pd1_99"><a href="https://github.com/cloudera-labs/hms-mirror/issues/165" id="-h09pd1_108" data-external="true" rel="noopener noreferrer">The reset-to-default-location doesn't seem to be working in v2</a></p></section><section class="chapter"><h2 id="2-2-0-19-6-pre-release" data-toc="2-2-0-19-6-pre-release">2.2.0.19.6 (pre-release)</h2><p id="-h09pd1_109"><span class="control" id="-h09pd1_112">What's New</span></p><p id="-h09pd1_110"><a href="https://github.com/cloudera-labs/hms-mirror/issues/163" id="-h09pd1_113" data-external="true" rel="noopener noreferrer">BEHAVIOR CHANGE - Drop any shadow table definitions created during migration automatically</a></p><aside class="prompt" data-type="tip" data-title="" id="-h09pd1_111"><p id="-h09pd1_114">This adjustment will remove shadow tables that were created during the migration process. This will help to keep the source and target clusters clean of any artifacts created during the migration process. An option <code class="code" id="-h09pd1_115">saveWorkingTables</code> has been added to the configuration to allow you to keep these tables if you need them for any audits or other reasons. The default is <code class="code" id="-h09pd1_116">false</code>, which means that the tables will be dropped automatically. An audit 'cleanup' file with the drop commands will be created in the report directory, regardless of the setting.</p></aside></section><section class="chapter"><h2 id="2-2-0-19-2-pre-release" data-toc="2-2-0-19-2-pre-release">2.2.0.19.2 (pre-release)</h2><p id="-h09pd1_117"><span class="control" id="-h09pd1_119">What's New</span></p><p id="-h09pd1_118"><a href="https://github.com/cloudera-labs/hms-mirror/issues/162" id="-h09pd1_120" data-external="true" rel="noopener noreferrer">Error event is not logged for table skipped because RIGHT already has the table</a> <a href="https://github.com/cloudera-labs/hms-mirror/issues/161" id="-h09pd1_121" data-external="true" rel="noopener noreferrer">Would be great to be able to omit warnings from the end of logs</a> <a href="https://github.com/cloudera-labs/hms-mirror/issues/160" id="-h09pd1_122" data-external="true" rel="noopener noreferrer">Be able to reduce spring framework related log entries</a></p></section><section class="chapter"><h2 id="2-2-0-19-1" data-toc="2-2-0-19-1">2.2.0.19.1</h2><p id="-h09pd1_123"><span class="control" id="-h09pd1_130">Bug Fixes</span></p><ul class="list _bullet" id="-h09pd1_124"><li class="list__item" id="-h09pd1_131"><p id="-h09pd1_133">Doubling of mapping locations for partitions in <code class="code" id="-h09pd1_134">distcp</code> for STORAGE_MIGRATION.</p></li><li class="list__item" id="-h09pd1_132"><p id="-h09pd1_135"><a href="https://github.com/cloudera-labs/hms-mirror/issues/158" id="-h09pd1_136" data-external="true" rel="noopener noreferrer">STORAGE_MIGRATION is setting ACID to ON, regardless.</a></p></li></ul><p id="-h09pd1_125"><span class="control" id="-h09pd1_137">What's New</span></p><ul class="list _bullet" id="-h09pd1_126"><li class="list__item" id="-h09pd1_138"><p id="-h09pd1_140"><a href="https://github.com/cloudera-labs/hms-mirror/issues/159" id="-h09pd1_141" data-external="true" rel="noopener noreferrer">Validate JDBC Jar Files in config.</a></p></li><li class="list__item" id="-h09pd1_139"><p id="-h09pd1_142">Ability to turn-on <code class="code" id="-h09pd1_143">strict</code> mode for Storage Migration. This will cause <code class="code" id="-h09pd1_144">distcp</code> to fail when non-standard locations are used. To turn off, use the <code class="code" id="-h09pd1_145">-sms|--storage-migration-strict</code> flag via the CLI.</p></li></ul><p id="-h09pd1_127"><span class="control" id="-h09pd1_146">Behavior Changes</span></p><p id="-h09pd1_128">The default behavior for Storage Migration 'strict' has changed from <code class="code" id="-h09pd1_147">true</code> to <code class="code" id="-h09pd1_148">false</code>. The intent behind the <code class="code" id="-h09pd1_149">strict</code> mode was to ensure <code class="code" id="-h09pd1_150">distcp</code> would fail when non-standard locations are used. The combination of <code class="code" id="-h09pd1_151">metastore_direct</code> and knowing the partition location details gives us a better chance on making these mappings work for <code class="code" id="-h09pd1_152">distcp</code>. When the scenario arises, we do <span class="control" id="-h09pd1_153">HIGHLY</span> recommend that you validate the plans created. The new default behavior will allow <code class="code" id="-h09pd1_154">distcp</code> to continue when non-standard locations are encountered, while throwing a warning. This will allow the migration to continue, but you should validate the results.</p><aside class="prompt" data-type="warning" data-title="" id="-h09pd1_129"><p>You will need to reset the `strict` mode flag in you configuration yaml. It will be set to `true` if the configuration was created before this release. You will need to set it to `false` to maintain this new 'preferred' behavior. </p><div class="code-block" data-lang="yaml">
transfer:
  storageMigration:
    strict: false
</div></aside></section><section class="chapter"><h2 id="2-2-0-18-1" data-toc="2-2-0-18-1">2.2.0.18.1</h2><p id="-h09pd1_156"><span class="control" id="-h09pd1_161">What's New</span></p><p id="-h09pd1_157">Beta Flag to be used for future beta features. To activate:</p><div class="tabs" id="-h09pd1_158" data-anchors="[-h09pd1_162,-h09pd1_163]"><div class="tabs__content" data-gtm="tab" id="-h09pd1_162" data-title="CLI"><div class="code-block" data-lang="bash" data-title="Shell">
hms-mirror --beta
</div></div><div class="tabs__content" data-gtm="tab" id="-h09pd1_163" data-title="Web UI"><div class="code-block" data-lang="bash" data-title="Shell">
hms-mirror --service --hms-mirror.config.beta=true
</div></div></div><p id="-h09pd1_159"><span class="control" id="-h09pd1_166">Bugs (Fixed)</span></p><ul class="list _bullet" id="-h09pd1_160"><li class="list__item" id="-h09pd1_167"><p id="-h09pd1_172"><a href="https://github.com/cloudera-labs/hms-mirror/issues/156" id="-h09pd1_173" data-external="true" rel="noopener noreferrer">Property overrides - po|pol|por - are not honored in v2, were working in 1.6.x</a></p></li><li class="list__item" id="-h09pd1_168"><p id="-h09pd1_174"><a href="https://github.com/cloudera-labs/hms-mirror/issues/155" id="-h09pd1_175" data-external="true" rel="noopener noreferrer">Partition auto-discovery config value is misconfigured during setup</a></p></li><li class="list__item" id="-h09pd1_169"><p id="-h09pd1_176"><a href="https://github.com/cloudera-labs/hms-mirror/issues/154" id="-h09pd1_177" data-external="true" rel="noopener noreferrer">Enhancement for hms-mirror setup</a></p></li><li class="list__item" id="-h09pd1_170"><p id="-h09pd1_178"><a href="https://github.com/cloudera-labs/hms-mirror/issues/153" id="-h09pd1_179" data-external="true" rel="noopener noreferrer">Remove automatic DB location as db_name.db in db location</a></p></li><li class="list__item" id="-h09pd1_171"><p id="-h09pd1_180"><a href="https://github.com/cloudera-labs/hms-mirror/issues/152" id="-h09pd1_181" data-external="true" rel="noopener noreferrer">Add support for Hive table backup in DISTCP mode</a></p></li></ul></section><section class="chapter"><h2 id="2-2-0-17-1" data-toc="2-2-0-17-1">2.2.0.17.1</h2><p id="-h09pd1_182"><span class="control" id="-h09pd1_186">What's New</span></p><ul class="list _bullet" id="-h09pd1_183"><li class="list__item" id="-h09pd1_187"><p id="-h09pd1_191"><a href="https://github.com/cloudera-labs/hms-mirror/issues/151" id="-h09pd1_192" data-external="true" rel="noopener noreferrer">Extend / Split 'transfer-ownership' to apply to database and/or table</a></p></li><li class="list__item" id="-h09pd1_188"><p id="-h09pd1_193">Improved Logging output</p></li><li class="list__item" id="-h09pd1_189"><p id="-h09pd1_194"><a href="https://github.com/cloudera-labs/hms-mirror/issues/149" id="-h09pd1_195" data-external="true" rel="noopener noreferrer">Support alternate db name for STORAGE_MIGRATION</a></p></li><li class="list__item" id="-h09pd1_190"><p id="-h09pd1_196">CLI Option to control <code class="code" id="-h09pd1_197">data-movement-strategy</code></p></li></ul><p id="-h09pd1_184"><span class="control" id="-h09pd1_198">Bugs (Fixed)</span></p><ul class="list _bullet" id="-h09pd1_185"><li class="list__item" id="-h09pd1_199"><p id="-h09pd1_202"><a href="https://github.com/cloudera-labs/hms-mirror/issues/150" id="-h09pd1_203" data-external="true" rel="noopener noreferrer">DB Prefix and DB Rename not working</a></p></li><li class="list__item" id="-h09pd1_200"><p id="-h09pd1_204"><a href="https://github.com/cloudera-labs/hms-mirror/issues/131" id="-h09pd1_205" data-external="true" rel="noopener noreferrer">When Metastore isn't configured for ALIGNED/DISTCP, it's not writing MSCK</a></p></li><li class="list__item" id="-h09pd1_201"><p id="-h09pd1_206">Fixed missing CR/LF is clean up scripts.</p></li></ul></section><section class="chapter"><h2 id="2-2-0-15-1" data-toc="2-2-0-15-1">2.2.0.15.1</h2><p id="-h09pd1_207"><span class="control" id="-h09pd1_210">What's New</span></p><p id="-h09pd1_208">Feature that allows you to 'skip' modifying the database location during a storage migration. This is useful if you're trying to archive tables in a database to another storage system, but want to leave the database location as is for new tables in the database. <a href="https://github.com/cloudera-labs/hms-mirror/issues/147" id="-h09pd1_211" data-external="true" rel="noopener noreferrer">For STORAGE_MIGRATION, add option that would skip any Database Location Adjustments</a></p><figure id="-h09pd1_209"><img alt="sm_skip_dblocs.png" src="images/sm_skip_dblocs.png" title="sm_skip_dblocs.png" width="2244" height="820"></figure></section><section class="chapter"><h2 id="2-2-0-15" data-toc="2-2-0-15">2.2.0.15</h2><p id="-h09pd1_212"><span class="control" id="-h09pd1_216">What's New</span></p><ul class="list _bullet" id="-h09pd1_213"><li class="list__item" id="-h09pd1_217"><p id="-h09pd1_219">Add support for Oracle Metastore Direct Connection</p></li><li class="list__item" id="-h09pd1_218"><p id="-h09pd1_220"><a href="https://github.com/cloudera-labs/hms-mirror/issues/145" id="-h09pd1_221" data-external="true" rel="noopener noreferrer">SQL Strategy only uses MSCK for partition discovery for Shadow Table</a></p></li></ul><p id="-h09pd1_214"><span class="control" id="-h09pd1_222">Bugs (Fixed)</span></p><ul class="list _bullet" id="-h09pd1_215"><li class="list__item" id="-h09pd1_223"><p id="-h09pd1_226">Output and Report Directory Consistency between CLI and Web UI. See docs for more details.</p></li><li class="list__item" id="-h09pd1_224"><p id="-h09pd1_227">Postgres Metastore Direct Connection Fixes</p></li><li class="list__item" id="-h09pd1_225"><p id="-h09pd1_228">SQL Data Strategy Validation Blockers for Acid tables-</p></li></ul></section><section class="chapter"><h2 id="2-2-0-12" data-toc="2-2-0-12">2.2.0.12</h2><p id="-h09pd1_229"><span class="control" id="-h09pd1_233">What's New</span></p><ul class="list _bullet" id="-h09pd1_230"><li class="list__item" id="-h09pd1_234"><p id="-h09pd1_235"><a href="https://github.com/cloudera-labs/hms-mirror/issues/142" id="-h09pd1_236" data-external="true" rel="noopener noreferrer">For STORAGE_MIGRATION to Ozone, ensure valid Volume/Bucket names</a></p></li></ul><p id="-h09pd1_231"><span class="control" id="-h09pd1_237">Bugs (Fixed)</span></p><ul class="list _bullet" id="-h09pd1_232"><li class="list__item" id="-h09pd1_238"><p id="-h09pd1_242"><a href="https://github.com/cloudera-labs/hms-mirror/issues/141" id="-h09pd1_243" data-external="true" rel="noopener noreferrer">Expose Stats in Web UI Reports</a></p></li><li class="list__item" id="-h09pd1_239"><p id="-h09pd1_244">Fixed the ability to Encrypt/Decrypt password in the UI.</p></li><li class="list__item" id="-h09pd1_240"><p id="-h09pd1_245"><a href="https://github.com/cloudera-labs/hms-mirror/issues/144" id="-h09pd1_246" data-external="true" rel="noopener noreferrer">Execute run for Strategies without RIGHT cluster definition fail to write reports</a></p></li><li class="list__item" id="-h09pd1_241"><p id="-h09pd1_247"><a href="https://github.com/cloudera-labs/hms-mirror/issues/143" id="-h09pd1_248" data-external="true" rel="noopener noreferrer">STORAGE_MIGRATION distcp efficiency option</a></p></li></ul></section><section class="chapter"><h2 id="2-2-0-10" data-toc="2-2-0-10">2.2.0.10</h2><p id="-h09pd1_249"><span class="control" id="-h09pd1_262">What's New</span></p><ul class="list _bullet" id="-h09pd1_250"><li class="list__item" id="-h09pd1_263"><p id="-h09pd1_264">[Hive 4 DB OWNER DDL syntax for ALTERing DB ONWER requires 'USER'](https://github. com/cloudera-labs/hms-mirror/issues/139)</p></li></ul><p id="-h09pd1_251">This changed resulted in a simplification of how we determine what the cluster platform is. Previously we used two attributes (<code class="code" id="-h09pd1_265">legacyHive</code> and <code class="code" id="-h09pd1_266">hdpHive3</code>) to determine the platform. This information would direct logic around translations and other features.</p><p id="-h09pd1_252">Unfortunately, this isn't enough for us to determine all the scenarios we're encountering. These attributes have been replaced with a new attribute call <code class="code" id="-h09pd1_267">platformType</code>.</p><p id="-h09pd1_253">We will make automatic translations of legacy configurations to the new <code class="code" id="-h09pd1_268">platformType</code> attribute. The translation will be pretty basic and result in either the platform type being defined as <code class="code" id="-h09pd1_269">HDP2</code> or <code class="code" id="-h09pd1_270">CDP_7.1</code>. If you have a more complex configuration, you'll need to adjust the <code class="code" id="-h09pd1_271">platformType</code> attribute manually. Future persisted configurations will use the new <code class="code" id="-h09pd1_272">platformType</code> attribute and drop the <code class="code" id="-h09pd1_273">legacyHive</code> and <code class="code" id="-h09pd1_274">hdpHive3</code> attributes.</p><ul class="list _bullet" id="-h09pd1_254"><li class="list__item" id="-h09pd1_275"><p id="-h09pd1_276"><a href="https://github.com/cloudera-labs/hms-mirror/issues/111" id="-h09pd1_277" data-external="true" rel="noopener noreferrer">Add &quot;Property Overrides&quot; to Web Interface</a></p></li></ul><p id="-h09pd1_255">A feature that was late in making it into the Web UI is now here.</p><ul class="list _bullet" id="-h09pd1_256"><li class="list__item" id="-h09pd1_278"><p id="-h09pd1_279"><a href="https://github.com/cloudera-labs/hms-mirror/issues/134" id="-h09pd1_280" data-external="true" rel="noopener noreferrer">For Web UI Service, default to prefer IPV4</a></p></li></ul><p id="-h09pd1_257">To ensure the right IP stack is used when the Web UI starts up, we're forcing this JDK configuration with the Web UI.</p><ul class="list _bullet" id="-h09pd1_258"><li class="list__item" id="-h09pd1_281"><p id="-h09pd1_282"><a href="https://github.com/cloudera-labs/hms-mirror/issues/136" id="-h09pd1_283" data-external="true" rel="noopener noreferrer">Forcibly set Java Home via -Duser.home</a></p></li></ul><p id="-h09pd1_259">We had a few requests and issues with implementations were the target environment isn't always setup with normal user 'home' standards that we can rely on. This change allows us to set the 'home' directory for the user running the application and ensure its translated correctly in hms-mirror for storing and reading configurations, reports, and logs.</p><p id="-h09pd1_260">If you are in an environment that doesn't follow user <code class="code" id="-h09pd1_284">$HOME</code> standards, you can set the <code class="code" id="-h09pd1_285">HOME</code> environment variable to a custom directory <span class="control" id="-h09pd1_286">BEFORE</span> starting <code class="code" id="-h09pd1_287">hms-mirror</code> to alter the default behavior.</p><section class="chapter"><h3 id="cleanup-sql-has-been-added-to-web-reporting-ui" data-toc="cleanup-sql-has-been-added-to-web-reporting-ui">Cleanup SQL has been added to Web Reporting UI</h3><p id="-h09pd1_288">We've added a 'Cleanup SQL' tab to the Web Reporting UI. This will show you the SQL that was generated to clean up the source cluster after the migration. This is useful to see what will be done before you execute the migration.</p><p id="-h09pd1_289"><span class="control" id="-h09pd1_291">Bugs (Fixed)</span></p><ul class="list _bullet" id="-h09pd1_290"><li class="list__item" id="-h09pd1_292"><p id="-h09pd1_295"><a href="https://github.com/cloudera-labs/hms-mirror/issues/135" id="-h09pd1_296" data-external="true" rel="noopener noreferrer">DATABASE set OWNER ALTER statement is incorrect</a></p></li><li class="list__item" id="-h09pd1_293"><p id="-h09pd1_297"><a href="https://github.com/cloudera-labs/hms-mirror/issues/138" id="-h09pd1_298" data-external="true" rel="noopener noreferrer">SQL ACID Migrations from HDPHive3 cluster Ordering</a></p></li><li class="list__item" id="-h09pd1_294"><p id="-h09pd1_299"><a href="https://github.com/cloudera-labs/hms-mirror/issues/140" id="-h09pd1_300" data-external="true" rel="noopener noreferrer">DB Location for HDP3 migrations is flipped</a></p></li></ul></section></section><section class="chapter"><h2 id="2-2-0-9" data-toc="2-2-0-9">2.2.0.9</h2><p id="-h09pd1_301"><span class="control" id="-h09pd1_305">Bugs (Fixed)</span></p><ul class="list _bullet" id="-h09pd1_302"><li class="list__item" id="-h09pd1_306"><p id="-h09pd1_309"><a href="https://github.com/cloudera-labs/hms-mirror/issues/128" id="-h09pd1_310" data-external="true" rel="noopener noreferrer">Allow process path that doesn't require Metastore Direct Connection</a></p></li><li class="list__item" id="-h09pd1_307"><p id="-h09pd1_311"><a href="https://github.com/cloudera-labs/hms-mirror/issues/129" id="-h09pd1_312" data-external="true" rel="noopener noreferrer">Fix Kerberos Connection Issues to HS2</a></p></li><li class="list__item" id="-h09pd1_308"><p id="-h09pd1_313"><a href="https://github.com/cloudera-labs/hms-mirror/issues/130" id="-h09pd1_314" data-external="true" rel="noopener noreferrer">Job Progress getting stuck at the end while writing reports</a></p></li></ul><p id="-h09pd1_303"><span class="control" id="-h09pd1_315">Enhancements</span></p><p id="-h09pd1_304">Increase build dependencies to CDP 7.1.9 SP1. Rework Pass Key Management. Additional details in Connection Validation.</p></section><section class="chapter"><h2 id="2-2-0-8" data-toc="2-2-0-8">2.2.0.8</h2><p id="-h09pd1_316"><span class="control" id="-h09pd1_318">Bugs (Fixed)</span></p><ul class="list _bullet" id="-h09pd1_317"><li class="list__item" id="-h09pd1_319"><p id="-h09pd1_321"><a href="https://github.com/cloudera-labs/hms-mirror/issues/124" id="-h09pd1_322" data-external="true" rel="noopener noreferrer">Not parsing abfs protocol locations correctly</a></p></li><li class="list__item" id="-h09pd1_320"><p id="-h09pd1_323"><a href="https://github.com/cloudera-labs/hms-mirror/issues/125" id="-h09pd1_324" data-external="true" rel="noopener noreferrer">Database input duplication</a></p></li></ul></section><section class="chapter"><h2 id="2-2-0-7" data-toc="2-2-0-7">2.2.0.7</h2><p id="-h09pd1_325"><span class="control" id="-h09pd1_327">Bugs (Fixed)</span></p><ul class="list _bullet" id="-h09pd1_326"><li class="list__item" id="-h09pd1_328"><p id="-h09pd1_331"><a href="https://github.com/cloudera-labs/hms-mirror/issues/122" id="-h09pd1_332" data-external="true" rel="noopener noreferrer">Non Configs blocking WEB UI Create</a></p></li><li class="list__item" id="-h09pd1_329"><p id="-h09pd1_333"><a href="https://github.com/cloudera-labs/hms-mirror/issues/123" id="-h09pd1_334" data-external="true" rel="noopener noreferrer">SCHEMA_ONLY with ALIGNED, DISTCP and Partitions is too granular on partition distcp</a></p></li><li class="list__item" id="-h09pd1_330"><p id="-h09pd1_335"><a href="https://github.com/cloudera-labs/hms-mirror/issues/121" id="-h09pd1_336" data-external="true" rel="noopener noreferrer">Expose rid in web ui</a></p></li></ul></section><section class="chapter"><h2 id="2-2-0-5" data-toc="2-2-0-5">2.2.0.5</h2><p id="-h09pd1_337"><span class="control" id="-h09pd1_339">Bugs (Fixed)</span></p><ul class="list _bullet" id="-h09pd1_338"><li class="list__item" id="-h09pd1_340"><p id="-h09pd1_344"><a href="https://github.com/cloudera-labs/hms-mirror/issues/120" id="-h09pd1_345" data-external="true" rel="noopener noreferrer">CLI Setup Issues</a></p></li><li class="list__item" id="-h09pd1_341"><p id="-h09pd1_346"><a href="https://github.com/cloudera-labs/hms-mirror/issues/118" id="-h09pd1_347" data-external="true" rel="noopener noreferrer">Stale Config after several runs</a></p></li><li class="list__item" id="-h09pd1_342"><p id="-h09pd1_348"><a href="https://github.com/cloudera-labs/hms-mirror/issues/117" id="-h09pd1_349" data-external="true" rel="noopener noreferrer">SQL Strategy Transfer Fixes</a></p></li><li class="list__item" id="-h09pd1_343"><p id="-h09pd1_350"><a href="https://github.com/cloudera-labs/hms-mirror/issues/116" id="-h09pd1_351" data-external="true" rel="noopener noreferrer">Partition Reductions for Distcp</a></p></li></ul></section><section class="chapter"><h2 id="2-2-0-4" data-toc="2-2-0-4">2.2.0.4</h2><p id="-h09pd1_352"><span class="control" id="-h09pd1_354">Bugs (Fixed)</span></p><ul class="list _bullet" id="-h09pd1_353"><li class="list__item" id="-h09pd1_355"><p id="-h09pd1_357"><a href="https://github.com/cloudera-labs/hms-mirror/issues/115" id="-h09pd1_358" data-external="true" rel="noopener noreferrer">Report Output Directory Issue</a></p></li><li class="list__item" id="-h09pd1_356"><p id="-h09pd1_359"><a href="https://github.com/cloudera-labs/hms-mirror/issues/116" id="-h09pd1_360" data-external="true" rel="noopener noreferrer">Filters Optimizations and Fixes</a></p></li></ul></section><section class="chapter"><h2 id="2-2-0-2" data-toc="2-2-0-2">2.2.0.2</h2><p id="-h09pd1_361">This is a big release for <code class="code" id="-h09pd1_372">hms-mirror</code>. We've added a Web interface to <code class="code" id="-h09pd1_373">hms-mirror</code> that makes it easier to configure and run varies scenarios.</p><p id="-h09pd1_362">Along with the Web interface, we've made some significant adjustments to the <code class="code" id="-h09pd1_374">hms-mirror</code> engine which is much more complete than the previous release. The engine now supports a wider range of strategies and has a more robust configuration system.</p><p id="-h09pd1_363">We do our best to guide you through configurations that make sense, help you build plans and manage complex scenarios.</p><section class="chapter"><h3 id="automatic-configuration-adjustments" data-toc="automatic-configuration-adjustments">Automatic Configuration Adjustments</h3><p id="-h09pd1_375">To ensure that configuration settings are properly set, the application will automatically adjust the configuration settings to match a valid scenario. These changes will be recorded in the 'run status config messages' section and can be seen on reports or the web interface.</p><p id="-h09pd1_376">Changes are mostly related to the acceptable strategy configurations. See <a href="location-alignment.html" id="-h09pd1_377" data-tooltip="In the Hive Metastore, Database definitions, Table Schemas, and Partition details include the location of their datasets. These locations contain a full URI to the dataset. Migrating from one cluster to another requires us to make adjustments to these locations.">Location Alignment</a> for more details.</p></section><section class="chapter"><h3 id="property-overrides" data-toc="property-overrides">Property Overrides</h3><p id="-h09pd1_378">Not yet available in Web UI. Coming soon <a href="https://github.com/cloudera-labs/hms-mirror/issues/111" id="-h09pd1_380" data-external="true" rel="noopener noreferrer">issue 111</a>.</p><p id="-h09pd1_379">This feature, introduced in the CLI, allows you to add/override Hive properties on the LEFT, RIGHT, or BOTH clusters for custom control of running Hive jobs. Most commonly used with SQL migration strategies.</p></section><section class="chapter"><h3 id="evaluate-partition-locations-and-reset-to-default-location" data-toc="evaluate-partition-locations-and-reset-to-default-location">Evaluate Partition Locations and Reset to Default Location</h3><p id="-h09pd1_381">These properties are no longer valid. An added property called 'translationType' is used to determine this functionality.</p><p id="-h09pd1_382">Before the <code class="code" id="-h09pd1_384">epl|evaluate-partition-locations</code> would gather partition location information from the Metastore Direct connection to ensure they were aligned. We've adjusted/simplified the concept with <code class="code" id="-h09pd1_385">translationType</code>, which defined either <code class="code" id="-h09pd1_386">RELATIVE</code> or <code class="code" id="-h09pd1_387">ALIGNED</code> strategy types.</p><p id="-h09pd1_383">See <a href="location-alignment.html" id="-h09pd1_388" data-tooltip="In the Hive Metastore, Database definitions, Table Schemas, and Partition details include the location of their datasets. These locations contain a full URI to the dataset. Migrating from one cluster to another requires us to make adjustments to these locations.">Location Alignment</a> for more details.</p></section><section class="chapter"><h3 id="concurrency" data-toc="concurrency">Concurrency</h3><p id="-h09pd1_389">In previous releases using the CLI, concurrency could be set through the configuration files <code class="code" id="-h09pd1_391">transfer:concurrency</code> setting. The default was 4 if no setting was provided. This setting in the control file is NO LONGER supported and will be ignored. The new default concurrency setting is <code class="code" id="-h09pd1_392">10</code> and can be overridden only during the application startup.</p><p id="-h09pd1_390">See <a href="concurrency.html" id="-h09pd1_393" data-tooltip="This controls how many parallel operations can be performed at once. The default is 10 and can be overridden during application startup.">Concurrency</a> for more details.</p></section><section class="chapter"><h3 id="global-location-maps" data-toc="global-location-maps">Global Location Maps</h3><p id="-h09pd1_394">Previous releases had a fairly basic implementation of 'Global Location Maps'. These could be supplied through the cli option <code class="code" id="-h09pd1_404">-glm</code>, which is still supported, but limited in functionality. The improved implementation work from the concept of building 'Warehouse Plans' which are then used to build the 'Global Location Maps'.</p><p id="-h09pd1_395">See <a href="database-warehouse-plans.html" id="-h09pd1_405" data-tooltip="">Warehouse Plans</a> for more details.</p><p id="-h09pd1_396">The <code class="code" id="-h09pd1_406">-glm</code> option can take an addition element to identify the mapping for a particular table type. As a result, any configuration files save with this setting will not be loaded and will need to be updated.</p><p id="-h09pd1_397">While the <code class="code" id="-h09pd1_407">-glm</code> option will still honor the old format of <code class="code" id="-h09pd1_408">source_dir=target_dir</code>, the new format is <code class="code" id="-h09pd1_409">source_dir:&lt;table_type&gt;:target_dir</code>. The <code class="code" id="-h09pd1_410">table_type</code> is a new addition to the configuration and is required for the new implementation. When omitted, the mapping will be created for both EXTERNAL and MANAGED tables.</p><p id="-h09pd1_398"><code class="code" id="-h09pd1_411">&lt;table_type&gt;</code> can be one of: <code class="code" id="-h09pd1_412">EXTERNAL_TABLE</code> or <code class="code" id="-h09pd1_413">MANAGED_TABLE</code>.</p><p id="-h09pd1_399"><code class="code" id="-h09pd1_414">-glm /tpsds_base_dir=EXTERNAL_TABLE:/alt/ext/location</code></p><p id="-h09pd1_400"><span class="control" id="-h09pd1_415">Old Format</span></p><div class="code-block" data-lang="yaml">
globalLocationMap:
  /tpcds_base_dir: &quot;/alt/ext/location&quot;
  /tpcds_base_dir2/web: &quot;/alt/ext/location&quot;
</div><p id="-h09pd1_402"><span class="control" id="-h09pd1_416">New Format</span></p><div class="code-block" data-lang="yaml">
userGlobalLocationMap:
  /tpcds_base_dir:
    EXTERNAL_TABLE: &quot;/alt/ext/location&quot;
  /tpcds_base_dir2/web:
    EXTERNAL_TABLE: &quot;/alt/ext/location&quot;
</div></section><section class="chapter"><h3 id="jdk-11-support" data-toc="jdk-11-support">JDK 11 Support</h3><p id="-h09pd1_417">The application now supports JDK 11, as well as JDK 8.</p></section><section class="chapter"><h3 id="kerberos-support-and-platform-libraries" data-toc="kerberos-support-and-platform-libraries">Kerberos Support and Platform Libraries</h3><p id="-h09pd1_418">We are still working to replicate the options available in previous release with regard to Kerberos connections. Currently, <code class="code" id="-h09pd1_421">hms-mirror</code> can only support a single Kerberos connection. This is the same as it was previously. <code class="code" id="-h09pd1_422">hms-mirror</code> packaging includes the core Hadoop classes required for Kerberos connections pulled from the latest CDP release.</p><p id="-h09pd1_419">In the past, we 'could' support kerberos connections to lower versions of Hadoop clusters (HDP and CDH) by running <code class="code" id="-h09pd1_423">hms-mirror</code> on a cluster with those hadoop libraries installed and specifying <code class="code" id="-h09pd1_424">--hadoop-classpath</code> on the commandline. This is no longer supported, as the packaging required to support the Web and REST interfaces is now different.</p><p id="-h09pd1_420">We are investigating the possibility of supporting kerberos connections to lower clusters in the future.</p></section><section class="chapter"><h3 id="metastore-direct-access" data-toc="metastore-direct-access">Metastore Direct Access</h3><p id="-h09pd1_425">In later 1.6 releases we introduced a 'Metastore Direct' connection type when defining a LEFT(source) cluster. To help build a more complete picture of locations in the metadata, we found it necessary to gather detailed location information for each partition of the datasets being inspected. Because Hive was so configurable regarding location preferences and the ability to set locations at the partition level, we needed to ensure that the locations were aligned. The only sure way to get this complete picture was to connect directly to the Metastore backend database. We currently support 'MYSQL' and 'POSTGRES' metastore backends. 'Oracle' coming soon.</p></section></section><div class="last-modified">Last modified: 14 April 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="hms-mirror-introduction.html" class="navigation-links__prev">Introduction</a><a href="getting-started.html" class="navigation-links__next">Getting Started</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b725/app.js"></script></body></html>