<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2024-09-12T12:41:31.874282"><title>Release Notes | hms-mirror</title><script type="application/json" id="virtual-toc-data">[{"id":"known-issues","level":0,"title":"Known Issues","anchor":"#known-issues"},{"id":"enhancement-requests","level":0,"title":"Enhancement Requests","anchor":"#enhancement-requests"},{"id":"2-2-0-10","level":0,"title":"2.2.0.10","anchor":"#2-2-0-10"},{"id":"2-2-0-9","level":0,"title":"2.2.0.9","anchor":"#2-2-0-9"},{"id":"2-2-0-8","level":0,"title":"2.2.0.8","anchor":"#2-2-0-8"},{"id":"2-2-0-7","level":0,"title":"2.2.0.7","anchor":"#2-2-0-7"},{"id":"2-2-0-5","level":0,"title":"2.2.0.5","anchor":"#2-2-0-5"},{"id":"2-2-0-4","level":0,"title":"2.2.0.4","anchor":"#2-2-0-4"},{"id":"2-2-0-2","level":0,"title":"2.2.0.2","anchor":"#2-2-0-2"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b408/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Release Notes | hms-mirror"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="hms-mirror Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/hms-mirror/v2.2.0.x/release-notes.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Release Notes | hms-mirror"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/hms-mirror/v2.2.0.x/release-notes.html#webpage",
    "url": "writerside-documentation/hms-mirror/v2.2.0.x/release-notes.html",
    "name": "Release Notes | hms-mirror",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/hms-mirror/#website",
    "url": "writerside-documentation/hms-mirror/",
    "name": "hms-mirror Help"
}</script><!-- End Schema.org --></head><body data-id="Release-Notes" data-main-title="Release Notes" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs=""><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>hms-mirror v2.2.0.x Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Release-Notes" id="Release-Notes.md">Release Notes</h1><section class="chapter"><h2 id="known-issues" data-toc="known-issues">Known Issues</h2><p id="vruz4l_12">The latest set of known issues can be found <a href="https://github.com/cloudera-labs/hms-mirror/issues?q=is%3Aissue+is%3Aopen+label%3Abug" id="vruz4l_13" data-external="true" rel="noopener noreferrer">here</a></p></section><section class="chapter"><h2 id="enhancement-requests" data-toc="enhancement-requests">Enhancement Requests</h2><p id="vruz4l_14">The latest set of enhancement requests can be found <a href="https://github.com/cloudera-labs/hms-mirror/issues?q=is%3Aissue+is%3Aopen+label%3Aenhancement" id="vruz4l_16" data-external="true" rel="noopener noreferrer">here</a>.</p><p id="vruz4l_15">If there is something you'd like to see, add a new issue <a href="https://github.com/cloudera-labs/hms-mirror/issues" id="vruz4l_17" data-external="true" rel="noopener noreferrer">here</a></p></section><section class="chapter"><h2 id="2-2-0-10" data-toc="2-2-0-10">2.2.0.10</h2><p id="vruz4l_18"><span class="control" id="vruz4l_24">What's New</span></p><section class="chapter"><h3 id="hive-4-db-owner-ddl-syntax-for-altering-db-onwer-requires-user" data-toc="hive-4-db-owner-ddl-syntax-for-altering-db-onwer-requires-user"><a href="https://github.com/cloudera-labs/hms-mirror/issues/139" id="vruz4l_29" data-external="true" rel="noopener noreferrer">Hive 4 DB OWNER DDL syntax for ALTERing DB ONWER requires 'USER'</a></h3><p id="vruz4l_26">This changed resulted in a simplification of how we determine what the cluster platform is. Previously we used two attributes (<code class="code" id="vruz4l_30">legacyHive</code> and <code class="code" id="vruz4l_31">hdpHive3</code>) to determine the platform. This information would direct logic around translations and other features.</p><p id="vruz4l_27">Unfortunately, this isn't enough for us to determine all the scenarios we're encountering. These attributes have been replaced with a new attribute call <code class="code" id="vruz4l_32">platformType</code>. A list of the platform types can be found <span id="vruz4l_33">here</span>.</p><p id="vruz4l_28">We will make automatic translations of legacy configurations to the new <code class="code" id="vruz4l_34">platformType</code> attribute. The translation will be pretty basic and result in either the platform type being defined as <code class="code" id="vruz4l_35">HDP2</code> or <code class="code" id="vruz4l_36">CDP_7.1</code>. If you have a more complex configuration, you'll need to adjust the <code class="code" id="vruz4l_37">platformType</code> attribute manually. Future persisted configurations will use the new <code class="code" id="vruz4l_38">platformType</code> attribute and drop the <code class="code" id="vruz4l_39">legacyHive</code> and <code class="code" id="vruz4l_40">hdpHive3</code> attributes.</p></section><section class="chapter"><h3 id="add-property-overrides-to-web-interface" data-toc="add-property-overrides-to-web-interface"><a href="https://github.com/cloudera-labs/hms-mirror/issues/111" id="vruz4l_43" data-external="true" rel="noopener noreferrer">Add &quot;Property Overrides&quot; to Web Interface</a></h3><p id="vruz4l_42">A feature that was late in making it into the Web UI is now here.</p></section><section class="chapter"><h3 id="for-web-ui-service-default-to-prefer-ipv4" data-toc="for-web-ui-service-default-to-prefer-ipv4"><a href="https://github.com/cloudera-labs/hms-mirror/issues/134" id="vruz4l_46" data-external="true" rel="noopener noreferrer">For Web UI Service, default to prefer IPV4</a></h3><p id="vruz4l_45">To ensure the right IP stack is used when the Web UI starts up, we're forcing this JDK configuration with the Web UI.</p></section><section class="chapter"><h3 id="forcibly-set-java-home-via-duser-home" data-toc="forcibly-set-java-home-via-duser-home"><a href="https://github.com/cloudera-labs/hms-mirror/issues/136" id="vruz4l_50" data-external="true" rel="noopener noreferrer">Forcibly set Java Home via -Duser.home</a></h3><p id="vruz4l_48">We had a few requests and issues with implementations were the target environment isn't always setup with normal user 'home' standards that we can rely on. This change allows us to set the 'home' directory for the user running the application and ensure its translated correctly in hms-mirror for storing and reading configurations, reports, and logs.</p><p id="vruz4l_49">If you are in an environment that doesn't follow user <code class="code" id="vruz4l_51">$HOME</code> standards, you can set the <code class="code" id="vruz4l_52">HOME</code> environment variable to a custom directory <span class="control" id="vruz4l_53">BEFORE</span> starting <code class="code" id="vruz4l_54">hms-mirror</code> to alter the default behavior.</p></section><section class="chapter"><h3 id="cleanup-sql-has-been-added-to-web-reporting-ui" data-toc="cleanup-sql-has-been-added-to-web-reporting-ui">Cleanup SQL has been added to Web Reporting UI</h3><p id="vruz4l_55">We've added a 'Cleanup SQL' tab to the Web Reporting UI. This will show you the SQL that was generated to clean up the source cluster after the migration. This is useful to see what will be done before you execute the migration.</p><p id="vruz4l_56"><span class="control" id="vruz4l_58">Bugs (Fixed)</span></p><ul class="list _bullet" id="vruz4l_57"><li class="list__item" id="vruz4l_59"><p><a href="https://github.com/cloudera-labs/hms-mirror/issues/135" id="vruz4l_62" data-external="true" rel="noopener noreferrer">DATABASE set OWNER ALTER statement is incorrect</a></p></li><li class="list__item" id="vruz4l_60"><p><a href="https://github.com/cloudera-labs/hms-mirror/issues/138" id="vruz4l_63" data-external="true" rel="noopener noreferrer">SQL ACID Migrations from HDPHive3 cluster Ordering</a></p></li><li class="list__item" id="vruz4l_61"><p><a href="https://github.com/cloudera-labs/hms-mirror/issues/140" id="vruz4l_64" data-external="true" rel="noopener noreferrer">DB Location for HDP3 migrations is flipped</a></p></li></ul></section></section><section class="chapter"><h2 id="2-2-0-9" data-toc="2-2-0-9">2.2.0.9</h2><p id="vruz4l_65"><span class="control" id="vruz4l_69">Bugs (Fixed)</span></p><ul class="list _bullet" id="vruz4l_66"><li class="list__item" id="vruz4l_70"><p><a href="https://github.com/cloudera-labs/hms-mirror/issues/128" id="vruz4l_73" data-external="true" rel="noopener noreferrer">Allow process path that doesn't require Metastore Direct Connection</a></p></li><li class="list__item" id="vruz4l_71"><p><a href="https://github.com/cloudera-labs/hms-mirror/issues/129" id="vruz4l_74" data-external="true" rel="noopener noreferrer">Fix Kerberos Connection Issues to HS2</a></p></li><li class="list__item" id="vruz4l_72"><p><a href="https://github.com/cloudera-labs/hms-mirror/issues/130" id="vruz4l_75" data-external="true" rel="noopener noreferrer">Job Progress getting stuck at the end while writing reports</a></p></li></ul><p id="vruz4l_67"><span class="control" id="vruz4l_76">Enhancements</span></p><p id="vruz4l_68">Increase build dependencies to CDP 7.1.9 SP1. Rework Pass Key Management. Additional details in Connection Validation.</p></section><section class="chapter"><h2 id="2-2-0-8" data-toc="2-2-0-8">2.2.0.8</h2><p id="vruz4l_77"><span class="control" id="vruz4l_79">Bugs (Fixed)</span></p><ul class="list _bullet" id="vruz4l_78"><li class="list__item" id="vruz4l_80"><p><a href="https://github.com/cloudera-labs/hms-mirror/issues/124" id="vruz4l_82" data-external="true" rel="noopener noreferrer">Not parsing abfs protocol locations correctly</a></p></li><li class="list__item" id="vruz4l_81"><p><a href="https://github.com/cloudera-labs/hms-mirror/issues/125" id="vruz4l_83" data-external="true" rel="noopener noreferrer">Database input duplication</a></p></li></ul></section><section class="chapter"><h2 id="2-2-0-7" data-toc="2-2-0-7">2.2.0.7</h2><p id="vruz4l_84"><span class="control" id="vruz4l_86">Bugs (Fixed)</span></p><ul class="list _bullet" id="vruz4l_85"><li class="list__item" id="vruz4l_87"><p><a href="https://github.com/cloudera-labs/hms-mirror/issues/122" id="vruz4l_90" data-external="true" rel="noopener noreferrer">Non Configs blocking WEB UI Create</a></p></li><li class="list__item" id="vruz4l_88"><p><a href="https://github.com/cloudera-labs/hms-mirror/issues/123" id="vruz4l_91" data-external="true" rel="noopener noreferrer">SCHEMA_ONLY with ALIGNED, DISTCP and Partitions is too granular on partition distcp</a></p></li><li class="list__item" id="vruz4l_89"><p><a href="https://github.com/cloudera-labs/hms-mirror/issues/121" id="vruz4l_92" data-external="true" rel="noopener noreferrer">Expose rid in web ui</a></p></li></ul></section><section class="chapter"><h2 id="2-2-0-5" data-toc="2-2-0-5">2.2.0.5</h2><p id="vruz4l_93"><span class="control" id="vruz4l_95">Bugs (Fixed)</span></p><ul class="list _bullet" id="vruz4l_94"><li class="list__item" id="vruz4l_96"><p><a href="https://github.com/cloudera-labs/hms-mirror/issues/120" id="vruz4l_100" data-external="true" rel="noopener noreferrer">CLI Setup Issues</a></p></li><li class="list__item" id="vruz4l_97"><p><a href="https://github.com/cloudera-labs/hms-mirror/issues/118" id="vruz4l_101" data-external="true" rel="noopener noreferrer">Stale Config after several runs</a></p></li><li class="list__item" id="vruz4l_98"><p><a href="https://github.com/cloudera-labs/hms-mirror/issues/117" id="vruz4l_102" data-external="true" rel="noopener noreferrer">SQL Strategy Transfer Fixes</a></p></li><li class="list__item" id="vruz4l_99"><p><a href="https://github.com/cloudera-labs/hms-mirror/issues/116" id="vruz4l_103" data-external="true" rel="noopener noreferrer">Partition Reductions for Distcp</a></p></li></ul></section><section class="chapter"><h2 id="2-2-0-4" data-toc="2-2-0-4">2.2.0.4</h2><p id="vruz4l_104"><span class="control" id="vruz4l_106">Bugs (Fixed)</span></p><ul class="list _bullet" id="vruz4l_105"><li class="list__item" id="vruz4l_107"><p><a href="https://github.com/cloudera-labs/hms-mirror/issues/115" id="vruz4l_109" data-external="true" rel="noopener noreferrer">Report Output Directory Issue</a></p></li><li class="list__item" id="vruz4l_108"><p><a href="https://github.com/cloudera-labs/hms-mirror/issues/116" id="vruz4l_110" data-external="true" rel="noopener noreferrer">Filters Optimizations and Fixes</a></p></li></ul></section><section class="chapter"><h2 id="2-2-0-2" data-toc="2-2-0-2">2.2.0.2</h2><p id="vruz4l_111">This is a big release for <code class="code" id="vruz4l_122">hms-mirror</code>. We've added a Web interface to <code class="code" id="vruz4l_123">hms-mirror</code> that makes it easier to configure and run varies scenarios.</p><p id="vruz4l_112">Along with the Web interface, we've made some significant adjustments to the <code class="code" id="vruz4l_124">hms-mirror</code> engine which is much more complete than the previous release. The engine now supports a wider range of strategies and has a more robust configuration system.</p><p id="vruz4l_113">We do our best to guide you through configurations that make sense, help you build plans and manage complex scenarios.</p><section class="chapter"><h3 id="automatic-configuration-adjustments" data-toc="automatic-configuration-adjustments">Automatic Configuration Adjustments</h3><p id="vruz4l_125">To ensure that configuration settings are properly set, the application will automatically adjust the configuration settings to match a valid scenario. These changes will be recorded in the 'run status config messages' section and can be seen on reports or the web interface.</p><p id="vruz4l_126">Changes are mostly related to the acceptable strategy configurations. See <a href="location-alignment.html" id="vruz4l_127" data-tooltip="In the Hive Metastore, Database definitions, Table Schemas, and Partition details include the location of their datasets. These locations contain a full URI to the dataset. Migrating from one cluster to another requires us to make adjustments to these locations.">Location Alignment</a> for more details.</p></section><section class="chapter"><h3 id="property-overrides" data-toc="property-overrides">Property Overrides</h3><p id="vruz4l_128">Not yet available in Web UI. Coming soon <a href="https://github.com/cloudera-labs/hms-mirror/issues/111" id="vruz4l_130" data-external="true" rel="noopener noreferrer">issue 111</a>.</p><p id="vruz4l_129">This feature, introduced in the CLI, allows you to add/override Hive properties on the LEFT, RIGHT, or BOTH clusters for custom control of running Hive jobs. Most commonly used with SQL migration strategies.</p></section><section class="chapter"><h3 id="evaluate-partition-locations-and-reset-to-default-location" data-toc="evaluate-partition-locations-and-reset-to-default-location">Evaluate Partition Locations and Reset to Default Location</h3><p id="vruz4l_131">These properties are no longer valid. An added property called 'translationType' is used to determine this functionality.</p><p id="vruz4l_132">Before the <code class="code" id="vruz4l_134">epl|evaluate-partition-locations</code> would gather partition location information from the Metastore Direct connection to ensure they were aligned. We've adjusted/simplified the concept with <code class="code" id="vruz4l_135">translationType</code>, which defined either <code class="code" id="vruz4l_136">RELATIVE</code> or <code class="code" id="vruz4l_137">ALIGNED</code> strategy types.</p><p id="vruz4l_133">See <a href="location-alignment.html" id="vruz4l_138" data-tooltip="In the Hive Metastore, Database definitions, Table Schemas, and Partition details include the location of their datasets. These locations contain a full URI to the dataset. Migrating from one cluster to another requires us to make adjustments to these locations.">Location Alignment</a> for more details.</p></section><section class="chapter"><h3 id="concurrency" data-toc="concurrency">Concurrency</h3><p id="vruz4l_139">In previous releases using the CLI, concurrency could be set through the configuration files <code class="code" id="vruz4l_141">transfer:concurrency</code> setting. The default was 4 if no setting was provided. This setting in the control file is NO LONGER supported and will be ignored. The new default concurrency setting is <code class="code" id="vruz4l_142">10</code> and can be overridden only during the application startup.</p><p id="vruz4l_140">See <a href="concurrency.html" id="vruz4l_143" data-tooltip="This controls how many parallel operations can be performed at once. The default is 10 and can be overridden during application startup.">Concurrency</a> for more details.</p></section><section class="chapter"><h3 id="global-location-maps" data-toc="global-location-maps">Global Location Maps</h3><p id="vruz4l_144">Previous releases had a fairly basic implementation of 'Global Location Maps'. These could be supplied through the cli option <code class="code" id="vruz4l_154">-glm</code>, which is still supported, but limited in functionality. The improved implementation work from the concept of building 'Warehouse Plans' which are then used to build the 'Global Location Maps'.</p><p id="vruz4l_145">See <span id="vruz4l_155">Warehouse Plans</span> for more details.</p><p id="vruz4l_146">The <code class="code" id="vruz4l_156">-glm</code> option can take an addition element to identify the mapping for a particular table type. As a result, any configuration files save with this setting will not be loaded and will need to be updated.</p><p id="vruz4l_147">While the <code class="code" id="vruz4l_157">-glm</code> option will still honor the old format of <code class="code" id="vruz4l_158">source_dir=target_dir</code>, the new format is <code class="code" id="vruz4l_159">source_dir:&lt;table_type&gt;:target_dir</code>. The <code class="code" id="vruz4l_160">table_type</code> is a new addition to the configuration and is required for the new implementation. When omitted, the mapping will be created for both EXTERNAL and MANAGED tables.</p><p id="vruz4l_148"><code class="code" id="vruz4l_161">&lt;table_type&gt;</code> can be one of: <code class="code" id="vruz4l_162">EXTERNAL_TABLE</code> or <code class="code" id="vruz4l_163">MANAGED_TABLE</code>.</p><p id="vruz4l_149"><code class="code" id="vruz4l_164">-glm /tpsds_base_dir=EXTERNAL_TABLE:/alt/ext/location</code></p><p id="vruz4l_150"><span class="control" id="vruz4l_165">Old Format</span></p><div class="code-block" data-lang="yaml">
globalLocationMap:
  /tpcds_base_dir: &quot;/alt/ext/location&quot;
  /tpcds_base_dir2/web: &quot;/alt/ext/location&quot;
</div><p id="vruz4l_152"><span class="control" id="vruz4l_166">New Format</span></p><div class="code-block" data-lang="yaml">
userGlobalLocationMap:
  /tpcds_base_dir:
    EXTERNAL_TABLE: &quot;/alt/ext/location&quot;
  /tpcds_base_dir2/web:
    EXTERNAL_TABLE: &quot;/alt/ext/location&quot;
</div></section><section class="chapter"><h3 id="jdk-11-support" data-toc="jdk-11-support">JDK 11 Support</h3><p id="vruz4l_167">The application now supports JDK 11, as well as JDK 8.</p></section><section class="chapter"><h3 id="kerberos-support-and-platform-libraries" data-toc="kerberos-support-and-platform-libraries">Kerberos Support and Platform Libraries</h3><p id="vruz4l_168">We are still working to replicate the options available in previous release with regard to Kerberos connections. Currently, <code class="code" id="vruz4l_171">hms-mirror</code> can only support a single Kerberos connection. This is the same as it was previously. <code class="code" id="vruz4l_172">hms-mirror</code> packaging includes the core Hadoop classes required for Kerberos connections pulled from the latest CDP release.</p><p id="vruz4l_169">In the past, we 'could' support kerberos connections to lower versions of Hadoop clusters (HDP and CDH) by running <code class="code" id="vruz4l_173">hms-mirror</code> on a cluster with those hadoop libraries installed and specifying <code class="code" id="vruz4l_174">--hadoop-classpath</code> on the commandline. This is no longer supported, as the packaging required to support the Web and REST interfaces is now different.</p><p id="vruz4l_170">We are investigating the possibility of supporting kerberos connections to lower clusters in the future.</p></section><section class="chapter"><h3 id="metastore-direct-access" data-toc="metastore-direct-access">Metastore Direct Access</h3><p id="vruz4l_175">In later 1.6 releases we introduced a 'Metastore Direct' connection type when defining a LEFT(source) cluster. To help build a more complete picture of locations in the metadata, we found it necessary to gather detailed location information for each partition of the datasets being inspected. Because Hive was so configurable regarding location preferences and the ability to set locations at the partition level, we needed to ensure that the locations were aligned. The only sure way to get this complete picture was to connect directly to the Metastore backend database. We currently support 'MYSQL' and 'POSTGRES' metastore backends. 'Oracle' coming soon.</p></section></section><div class="last-modified">Last modified: 12 September 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="hms-mirror-introduction.html" class="navigation-links__prev">Introduction</a><a href="getting-started.html" class="navigation-links__next">Getting Started</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b408/app.js"></script></body></html>