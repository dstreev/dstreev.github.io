<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-01-25T09:19:35.33794"><title>Setup | hms-mirror</title><script type="application/json" id="virtual-toc-data">[{"id":"binary-package","level":0,"title":"Binary Package","anchor":"#binary-package"},{"id":"hms-mirror-setup-from-binary-distribution","level":0,"title":"HMS-Mirror Setup from Binary Distribution","anchor":"#hms-mirror-setup-from-binary-distribution"},{"id":"quick-start","level":0,"title":"Quick Start","anchor":"#quick-start"},{"id":"general-guidance","level":0,"title":"General Guidance","anchor":"#general-guidance"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b575/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Setup | hms-mirror"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="hms-mirror Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/hms-mirror/v2.2.0.x/hms-mirror-setup.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Setup | hms-mirror"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/hms-mirror/v2.2.0.x/hms-mirror-setup.html#webpage",
    "url": "writerside-documentation/hms-mirror/v2.2.0.x/hms-mirror-setup.html",
    "name": "Setup | hms-mirror",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/hms-mirror/#website",
    "url": "writerside-documentation/hms-mirror/",
    "name": "hms-mirror Help"
}</script><!-- End Schema.org --></head><body data-id="hms-mirror-setup" data-main-title="Setup" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="hms-mirror-cfg.md|Configuration"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>hms-mirror v2.2.0.x Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="hms-mirror-setup" id="hms-mirror-setup.md">Setup</h1><section class="chapter"><h2 id="binary-package" data-toc="binary-package">Binary Package</h2><p id="w4dzxb_7"><a href="https://github.com/cloudera-labs/hms-mirror/releases" id="w4dzxb_8" data-external="true" rel="noopener noreferrer">Download the latest version of <code class="code" id="w4dzxb_9">hms-mirror-&lt;version&gt;-dist.tar.gz</code></a></p></section><section class="chapter"><h2 id="hms-mirror-setup-from-binary-distribution" data-toc="hms-mirror-setup-from-binary-distribution">HMS-Mirror Setup from Binary Distribution</h2><p id="w4dzxb_10">On the edgenode:</p><ul class="list _bullet" id="w4dzxb_11"><li class="list__item" id="w4dzxb_14"><p id="w4dzxb_18">Remove previous install directory <code class="code" id="w4dzxb_20">rm -rf hms-mirror-install-&lt;version&gt;</code></p><ul class="list _bullet" id="w4dzxb_19"><li class="list__item" id="w4dzxb_21"><p>If you don't remove the previous install directory, the default <code class="code" id="w4dzxb_22">tar</code> behaviour will NOT overwrite the existing directory, hence you won't get the new version.</p></li></ul></li><li class="list__item" id="w4dzxb_15"><p id="w4dzxb_23">Expand the tarball <code class="code" id="w4dzxb_25">tar zxvf hms-mirror-&lt;version&gt;-dist.tar.gz</code>.</p><aside class="prompt" data-type="tip" data-title="" id="w4dzxb_24"><p id="w4dzxb_26">This produces a child <code class="code" id="w4dzxb_27">hms-mirror-install-&lt;version&gt;</code> directory.</p></aside></li><li class="list__item" id="w4dzxb_16"><p id="w4dzxb_28">Make sure you <span class="control" id="w4dzxb_30">STOP</span> any previous release of <code class="code" id="w4dzxb_31">hms-mirror</code> before attempting install.</p><ul class="list _bullet" id="w4dzxb_29"><li class="list__item" id="w4dzxb_32"><p><code class="code" id="w4dzxb_33">hms-mirror --stop</code></p></li></ul></li><li class="list__item" id="w4dzxb_17"><p id="w4dzxb_34">Two options for installation:</p><ul class="list _bullet" id="w4dzxb_35"><li class="list__item" id="w4dzxb_36"><p>As the root user (or <code class="code" id="w4dzxb_38">sudo</code>), run <code class="code" id="w4dzxb_39">hms-mirror-install-&lt;version&gt;/setup.sh</code>. This will install the <code class="code" id="w4dzxb_40">hms-mirror</code> packages in <code class="code" id="w4dzxb_41">/usr/local/hms-mirror</code> and create symlinks for the executables in <code class="code" id="w4dzxb_42">/usr/local/bin</code>. At this point, <code class="code" id="w4dzxb_43">hms-mirror</code> should be available to all user and in the default path.</p></li><li class="list__item" id="w4dzxb_37"><p>As the local user, run <code class="code" id="w4dzxb_44">hms-mirror-install-&lt;version&gt;/setup.sh</code>. This will install the <code class="code" id="w4dzxb_45">hms-mirror</code> packages in <code class="code" id="w4dzxb_46">$HOME/.hms-mirror</code> and create symlink in <code class="code" id="w4dzxb_47">$HOME/bin</code>. Ensure <code class="code" id="w4dzxb_48">$HOME/bin</code> is in the users path and run <code class="code" id="w4dzxb_49">hms-mirror</code>.</p></li></ul></li></ul><p id="w4dzxb_12"><span class="emphasis" id="w4dzxb_50">DO NOT RUN <code class="code" id="w4dzxb_51">hms-mirror</code> from the installation directory.</span></p><p id="w4dzxb_13">If you install both options, your environment PATH will determine which one is run. Make note of this because an upgrade may not be reachable.</p></section><section class="chapter"><h2 id="quick-start" data-toc="quick-start">Quick Start</h2><p id="w4dzxb_52">After installation (above), run <code class="code" id="w4dzxb_55">hms-mirror</code> for the particular interface that interests you.</p><div class="tabs" id="w4dzxb_53" data-anchors="[w4dzxb_56,w4dzxb_57]"><div class="tabs__content" data-gtm="tab" id="w4dzxb_56" data-title="Web UI"><p>Run: </p><p id="w4dzxb_58"><code class="code" id="w4dzxb_60">hms-mirror --service</code></p><p id="w4dzxb_59">Open a browser to <code class="code" id="w4dzxb_61">http://hostname:8090/hms-mirror</code> to access the Web UI.</p></div><div class="tabs__content" data-gtm="tab" id="w4dzxb_57" data-title="CLI"><p>`hms-mirror` requires a configuration file describing the LEFT (source) and RIGHT (target) cluster connections. There are two ways to create the config: </p><ul class="list _bullet" id="w4dzxb_62"><li class="list__item" id="w4dzxb_63"><p>Use the <a href="hms-mirror-default-configuration-template.html" id="w4dzxb_65" data-tooltip="Use this as a template for the default.yaml configuration file used by the cli interface. You can also build a configuration file in the 'web' interface and reference it in the cli interface.">default config template</a>) as a starting point. Edit and place a copy here <code class="code" id="w4dzxb_66">$HOME/.hms-mirror/cfg/default.yaml</code>.</p></li><li class="list__item" id="w4dzxb_64"><p><code class="code" id="w4dzxb_67">hms-mirror --setup</code> - Prompts a series of questions about the LEFT and RIGHT clusters to build the default configuration file.</p></li></ul></div></div><p id="w4dzxb_54">If either or both clusters are Kerberized, please review the detailed configuration guidance <a href="hms-mirror-running.html#running-against-a-legacy-non-cdp-kerberized-hiveserver2" id="w4dzxb_68" data-tooltip="hms-mirror is pre-built with CDP libraries and WILL NOT be compatible with LEGACY kerberos environments. A Kerberos connection can only be made to ONE cluster when the clusters are NOT running the same 'major' version of Hadoop.">here</a> and <a href="hms-mirror-running.html#kerberized-connections" id="w4dzxb_69" data-tooltip="hms-mirror relies on the Hadoop libraries to connect via 'kerberos'. Suppose the clusters are running different versions of Hadoop/Hive. In that case, we can only support connecting to one of the clusters via Kerberos.">here</a>.</p></section><section class="chapter"><h2 id="general-guidance" data-toc="general-guidance">General Guidance</h2><ul class="list _bullet" id="w4dzxb_70"><li class="list__item" id="w4dzxb_73"><p>Run <code class="code" id="w4dzxb_74">hms-mirror</code> from the RIGHT cluster on an Edge Node.</p></li></ul><aside class="prompt" data-type="tip" data-title="" id="w4dzxb_71"><p id="w4dzxb_75"><code class="code" id="w4dzxb_76">hms-mirror</code> is built (default setting) with CDP libraries and will connect natively using those libraries. The edge node should have the hdfs client installed and configured for that cluster. The application will use this connection for some migration strategies.</p></aside><ul class="list _bullet" id="w4dzxb_72"><li class="list__item" id="w4dzxb_77"><p>If running from the LEFT cluster, note that the <code class="code" id="w4dzxb_80">-ro/--read-only</code> feature examines HDFS on the RIGHT cluster. The HDFS client on the LEFT cluster may not support this access.</p></li><li class="list__item" id="w4dzxb_78"><p>Connecting to HS2 through KNOX (in both clusters, if possible) reduces the complexities of the connection by removing Kerberos from the picture.</p></li><li class="list__item" id="w4dzxb_79"><p>The libraries will only support a Kerberos connection to a 'single' version of Hadoop at a time. This is relevant for 'Kerberized' connections to Hive Server 2. The default libraries will support a kerberized connection to a CDP clusters HS2 and HDFS. If the LEFT (source) cluster is Kerberized, including HS2, you will need to make some adjustments. </p><ul class="list _bullet" id="w4dzxb_81"><li class="list__item" id="w4dzxb_82"><p>The LEFT clusters HS2 needs to support any auth mechanism BUT Kerberos.</p></li><li class="list__item" id="w4dzxb_83"><p>Use an Ambari Group to setup an independent HS2 instance for this exercise or use KNOX.</p></li></ul></li></ul></section><div class="last-modified">Last modified: 25 January 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="hms-mirror-cfg.html" class="navigation-links__prev">Configuration</a><a href="jdbc-drivers-and-configuration.html" class="navigation-links__next">Hive JDBC Drivers and Configuration</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b575/app.js"></script></body></html>