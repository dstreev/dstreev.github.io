<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2024-09-05T20:35:27.976729"><title>Limits | hms-mirror</title><script type="application/json" id="virtual-toc-data">[{"id":"impact-on-source-and-target-systems","level":0,"title":"Impact on Source and Target Systems","anchor":"#impact-on-source-and-target-systems"},{"id":"databases-with-a-large-number-of-tables","level":0,"title":"Databases with a Large Number of Tables","anchor":"#databases-with-a-large-number-of-tables"},{"id":"reports","level":0,"title":"Reports","anchor":"#reports"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b408/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Limits | hms-mirror"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="hms-mirror Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/hms-mirror/v2.2.0.x/limits.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Limits | hms-mirror"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/hms-mirror/v2.2.0.x/limits.html#webpage",
    "url": "writerside-documentation/hms-mirror/v2.2.0.x/limits.html",
    "name": "Limits | hms-mirror",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/hms-mirror/#website",
    "url": "writerside-documentation/hms-mirror/",
    "name": "hms-mirror Help"
}</script><!-- End Schema.org --></head><body data-id="Limits" data-main-title="Limits" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Getting-Started.md|Getting Started"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>hms-mirror v2.2.0.x Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Limits" id="Limits.md">Limits</h1><p id="z6pvr58_3">Let's cover some practical limits of <code class="code" id="z6pvr58_12">hms-mirror</code> in the area of scale.</p><p id="z6pvr58_4"><code class="code" id="z6pvr58_13">hms-mirror</code> is designed to migrate databases. While you can migrate 'every' databases in a schema using the <code class="code" id="z6pvr58_14">dbRegEx</code> we don't recommend this. You should construct a plan to migrate databases individually.</p><p id="z6pvr58_5">The architecture of <code class="code" id="z6pvr58_15">hms-mirror</code> does everything in memory. Each table and partition consumes memory and contributes to the load placed on systems we're using.</p><p id="z6pvr58_6">We've done practical tests to do a SCHEMA_ONLY migration of 10k tables between two clusters. On our relatively modest hardware, we accomplished this in about 8 minutes with the default memory settings.</p><p id="z6pvr58_7">Writing the reports, which happens at the end takes time. It this case 1-2 minutes.</p><p id="z6pvr58_8">If you need to process more than what we've tested, please do a 'Dry-Run' first. Watch the memory of the application on the host where its running. You may need to increase the memory profile of the application and try again. See <a href="memory-settings.html" id="z6pvr58_16" data-tooltip="The default memory footprint of hms-mirror is set in the startup script here which declares an 8GB max footprint.">Memory Settings</a></p><section class="chapter"><h2 id="impact-on-source-and-target-systems" data-toc="impact-on-source-and-target-systems">Impact on Source and Target Systems</h2><p id="z6pvr58_17"><code class="code" id="z6pvr58_19">hms-mirror</code> uses HiveServer2 connections to 'extract' and 'replay' schema's between systems. It also utilizes Metastore Direct connections to pull partition level details that can't be efficiently collected through the HiveServer2 SQL interface.</p><p id="z6pvr58_18">The concurrency (default of 10), will act like 10 users making a whole lot of DDL requests. The impact to existing workloads is a possibility. If you have a large amount of data(metadata) to migrate/extract and you're concerned about the impact to the user base, you should 'isolate' the HiveServer2 AND Hive Metastore for this process. That could mean setting up an additional HiveServer2/Metastore pair that is used specifically by 'hms-mirror'.</p></section><section class="chapter"><h2 id="databases-with-a-large-number-of-tables" data-toc="databases-with-a-large-number-of-tables">Databases with a Large Number of Tables</h2><p id="z6pvr58_20">As we mentioned, migrations are a database at a time. If the table in the database exceed some of these limits, consider using various <code class="code" id="z6pvr58_21">table filters</code> to process filtered lists of tables in the database at a time.</p></section><section class="chapter"><h2 id="reports" data-toc="reports">Reports</h2><p id="z6pvr58_22">Reports are created at the database level as well. When the database has a large number of tables, these reports can be extremely long.</p></section><div class="last-modified">Last modified: 06 September 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="hms-mirror-setup.html" class="navigation-links__prev">Setup</a><a href="runtime-interfaces.html" class="navigation-links__next">Runtime Interfaces</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b408/app.js"></script></body></html>