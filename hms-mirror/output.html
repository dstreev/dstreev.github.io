<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex">  <meta name="built-on" content="2023-11-07T07:59:19.196955"><meta name="build-number" content="${buildNumber}">       <title>Output | hms-mirror</title><script id="virtual-toc-data" type="application/json">[{"id":"application-report","level":0,"title":"Application Report","anchor":"#application-report"},{"id":"sql-scripts","level":0,"title":"SQL Scripts","anchor":"#sql-scripts"},{"id":"yaml-output","level":0,"title":"YAML Output","anchor":"#yaml-output"},{"id":"runbook","level":0,"title":"Runbook","anchor":"#runbook"},{"id":"distcp-scripts-and-workbook","level":0,"title":"distcp Scripts and Workbook","anchor":"#distcp-scripts-and-workbook"},{"id":"logs","level":0,"title":"Logs","anchor":"#logs"}]</script><script id="topic-shortcuts" type="application/json"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.1.5-b176/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Output | hms-mirror"/><meta property="og:description" content=""/><meta property="og:image" content=""/><meta property="og:site_name" content="hms-mirror Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="hms-mirroroutput.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Output | hms-mirror"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "hms-mirroroutput.html#webpage", "url": "hms-mirroroutput.html", "name": "Output | hms-mirror", "description": "", "image": "", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "hms-mirror/#website", "url": "hms-mirror/", "name": "hms-mirror Help" }</script><!-- End Schema.org --> <!-- Mermaid light/dark themes -->  <link rel="stylesheet" type="text/css" href="mermaid.css">  </head>     <body data-id="Output" data-main-title="Output" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs="hms-mirror-running.md|Running"  >   <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>hms-mirror  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Output"  id="Output.md"  >Output</h1>  <p id="3ca79749_116039">The output from <code class="code" id="3ca79749_116040">hms-mirror</code> will, by default, be sent to <code class="code" id="3ca79749_116041">$HOME/.hms-mirror/reports</code>. Each run will be place in a sub-directory with a timestamp. You can choose to redirect the output to a different location with the <code class="code" id="3ca79749_116042">-o</code> option. In this case the directory will be created if it doesn't exist and the output will be written to that location (without the timestamp sub-directory).</p><p id="3ca79749_116043">If you wish to have the reports written to a different location AND have the timestamp sub-directory, use a symbolic link redirect the <code class="code" id="3ca79749_116044">$HOME/.hms-mirror/reports</code> directory to the desired output directory.</p><p id="3ca79749_116045">A report for each <span class="control" id="3ca79749_116046">database</span> processed will be created in the output directory. Files for a database will be prefixed with the database name. This applies to each of the following report/script types.</p><section class="chapter"><h2 id="application-report" data-toc="application-report">Application Report</h2><p id="3ca79749_116047">The output report is in markdown format. You can use a markdown renderer to view the report. If you don't have a renderer, you can still read the report, it will just be harder to read.</p><p id="3ca79749_116048">The report include various stats regarding the run and details for each tables migration process. In this report, you'll find details on &quot;why&quot; a particular table was skipped, or what actions were taken to migrate the table. The report will even list issue encountered during the process.</p></section><section class="chapter"><h2 id="sql-scripts" data-toc="sql-scripts">SQL Scripts</h2><p id="3ca79749_116049"><code class="code" id="3ca79749_116050">hms-mirror</code> will produce the SQL scripts used to migrate the data. These scripts are written to the output directory. The scripts are prefixed with the <span class="control" id="3ca79749_116051">database</span> name.</p><ul class="list _ul" id="3ca79749_116052"    ><li class="list__item" id="3ca79749_116053"><p><code class="code" id="3ca79749_116054">&lt;db_name&gt;_LEFT_Clueanup_execute.sql</code> - When present, this scripts represents SQL statements that should be run on the LEFT cluster to cleanup artifacts from the migration process.</p></li><li class="list__item" id="3ca79749_116055"><p><code class="code" id="3ca79749_116056">&lt;db_name&gt;_LEFT_execute.sql</code> - When present, this scripts represents SQL statements that should be run on the LEFT cluster to migrate the data. If the <code class="code" id="3ca79749_116057">-e</code> option was used, the contents of this script will be executed on the LEFT cluster by <code class="code" id="3ca79749_116058">hms-mirror</code>. If the <code class="code" id="3ca79749_116059">-e</code> option was NOT specified, these script can be verified and executed manually on the LEFT cluster.</p></li><li class="list__item" id="3ca79749_116060"><p><code class="code" id="3ca79749_116061">&lt;db_name&gt;_RIGHT_execute.sql</code> - When present, this scripts represents SQL statements that should be run on the RIGHT cluster to migrate the data. If the <code class="code" id="3ca79749_116062">-e</code> option was used, the contents of this script will be executed on the RIGHT cluster by <code class="code" id="3ca79749_116063">hms-mirror</code>. If the <code class="code" id="3ca79749_116064">-e</code> option was NOT specified, these script can be verified and executed manually on the RIGHT cluster.</p></li><li class="list__item" id="3ca79749_116065"><p><code class="code" id="3ca79749_116066">&lt;db_name&gt;_RIGHT_Clueanup_execute.sql</code> - When present, this scripts represents SQL statements that should be run on the RIGHT cluster to cleanup artifacts from the migration process.</p></li></ul></section><section class="chapter"><h2 id="yaml-output" data-toc="yaml-output">YAML Output</h2><p id="3ca79749_116067">The <code class="code" id="3ca79749_116068">&lt;db_name&gt;_hms-mirror.yaml</code> file is a full listing of the migration process as a document. Use this file to programmatically determine what actions were taken during the migration process.</p></section><section class="chapter"><h2 id="runbook" data-toc="runbook">Runbook</h2><p id="3ca79749_116069">The <code class="code" id="3ca79749_116070">&lt;db_name&gt;_runbook.md</code> is a markdown file that is a workbook of 'what' to do. It lays out the steps taken and the steps to be taken to complete the migration process.</p></section><section class="chapter"><h2 id="distcp-scripts-and-workbook" data-toc="distcp-scripts-and-workbook">distcp Scripts and Workbook</h2><p id="3ca79749_116071">When you include the <code class="code" id="3ca79749_116072">-dc|--distcp</code> option when running <code class="code" id="3ca79749_116073">hms-mirror</code>, we'll build a template <code class="code" id="3ca79749_116074">distcp</code> job for each database that has data to be migrated. The result is a set of <span class="control" id="3ca79749_116075">bash scripts</span> and source files listing the contents to be used in the migration.</p><p id="3ca79749_116076">Depending other influencing options, there may be a <code class="code" id="3ca79749_116077">distcp</code> script for the LEFT and RIGHT clusters. The scripts will be prefixed with the database name.</p><p id="3ca79749_116078">The various <span class="control" id="3ca79749_116079">distcp</span> reports include:</p><ul class="list _ul" id="3ca79749_116080"    ><li class="list__item" id="3ca79749_116081"><p><code class="code" id="3ca79749_116082">&lt;db_name&gt;_RIGHT_n_distcp_source.txt</code> - A list of the source directories to be copied to the RIGHT cluster. The <code class="code" id="3ca79749_116083">n</code> will increment for each one of the jobs created for the database being migrated. These files must be copied to the RIGHT clusters HDFS filesystem. When running the distcp bash shell script, set the bash environment variable <code class="code" id="3ca79749_116084">$HCFS_BASE_DIR</code> to set the 'directory' these are copied to.</p></li><li class="list__item" id="3ca79749_116085"><p><code class="code" id="3ca79749_116086">&lt;db_name&gt;_RIGHT_distcp_script.sh</code> - The bash script created that will run the <code class="code" id="3ca79749_116087">distcp</code> jobs. This script will be run on the RIGHT cluster. Review the comments in the script for details on how to run it.</p></li><li class="list__item" id="3ca79749_116088"><p><code class="code" id="3ca79749_116089">&lt;db_name&gt;_RIGHT_distcp_workbook.md</code> - A markdown report table that breakdown what will be moved by the process.</p></li></ul><p id="3ca79749_116090">** Example distcp Workbook **</p><div class="table-wrapper" ><table class="wide" id="3ca79749_116091"  ><thead><tr class="ijRowHead" id="3ca79749_116092"><th id="3ca79749_116093"><p>Database</p></th><th id="3ca79749_116094"><p>Target</p></th><th id="3ca79749_116095"><p>Sources</p></th></tr></thead><tbody ><tr id="3ca79749_116096"><td id="3ca79749_116097"><p>tpcds_bin_partitioned_orc_10</p></td><td id="3ca79749_116098"></td><td id="3ca79749_116099"></td></tr><tr id="3ca79749_116100"><td id="3ca79749_116101"></td><td id="3ca79749_116102"><p>hdfs://HOME90/apps/hive/warehouse/tpcds_bin_partitioned_orc_10.db</p></td><td id="3ca79749_116103"><p>hdfs://HDP50/apps/hive/warehouse/tpcds_bin_partitioned_orc_10.db/call_center</p><br><p> hdfs://HDP50/apps/hive/warehouse/tpcds_bin_partitioned_orc_10.db/catalog_page</p><br><p> hdfs://HDP50/apps/hive/warehouse/tpcds_bin_partitioned_orc_10.db/catalog_returns</p><br><p> hdfs://HDP50/apps/hive/warehouse/tpcds_bin_partitioned_orc_10.db/catalog_sales</p><br><p> hdfs://HDP50/apps/hive/warehouse/tpcds_bin_partitioned_orc_10.db/customer</p><br><p> hdfs://HDP50/apps/hive/warehouse/tpcds_bin_partitioned_orc_10.db/customer_address</p><br><p> hdfs://HDP50/apps/hive/warehouse/tpcds_bin_partitioned_orc_10.db/customer_demographics</p><br><p> hdfs://HDP50/apps/hive/warehouse/tpcds_bin_partitioned_orc_10.db/date_dim</p><br><p> hdfs://HDP50/apps/hive/warehouse/tpcds_bin_partitioned_orc_10.db/household_demographics</p><br><p> hdfs://HDP50/apps/hive/warehouse/tpcds_bin_partitioned_orc_10.db/income_band</p><br><p> hdfs://HDP50/apps/hive/warehouse/tpcds_bin_partitioned_orc_10.db/inventory</p><br><p> hdfs://HDP50/apps/hive/warehouse/tpcds_bin_partitioned_orc_10.db/item</p><br><p> hdfs://HDP50/apps/hive/warehouse/tpcds_bin_partitioned_orc_10.db/promotion</p><br><p> hdfs://HDP50/apps/hive/warehouse/tpcds_bin_partitioned_orc_10.db/reason</p><br><p> hdfs://HDP50/apps/hive/warehouse/tpcds_bin_partitioned_orc_10.db/ship_mode</p><br><p> hdfs://HDP50/apps/hive/warehouse/tpcds_bin_partitioned_orc_10.db/store</p><br><p> hdfs://HDP50/apps/hive/warehouse/tpcds_bin_partitioned_orc_10.db/store_returns</p><br><p> hdfs://HDP50/apps/hive/warehouse/tpcds_bin_partitioned_orc_10.db/store_sales</p><br><p> hdfs://HDP50/apps/hive/warehouse/tpcds_bin_partitioned_orc_10.db/time_dim</p><br><p> hdfs://HDP50/apps/hive/warehouse/tpcds_bin_partitioned_orc_10.db/warehouse</p><br><p> hdfs://HDP50/apps/hive/warehouse/tpcds_bin_partitioned_orc_10.db/web_page</p><br><p> hdfs://HDP50/apps/hive/warehouse/tpcds_bin_partitioned_orc_10.db/web_returns</p><br><p> hdfs://HDP50/apps/hive/warehouse/tpcds_bin_partitioned_orc_10.db/web_sales</p><br><p> hdfs://HDP50/apps/hive/warehouse/tpcds_bin_partitioned_orc_10.db/web_site</p><br></td></tr></tbody ></table ></div></section><section class="chapter"><h2 id="logs" data-toc="logs">Logs</h2><p id="3ca79749_116128">Logs, as of 1.6.5.6 are now in the same output directory as the reports.</p></section><div class="last-modified"> Last modified: 07 November 2023</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">  <a class="navigation-links__prev" href="hms-mirror-running.html">Running</a>   <a class="navigation-links__next" href="optimizations.html">Optimizations</a>  </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/writerside/apidoc/6.1.5-b176/app.js"></script></body></html>