<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-01-25T09:19:35.359425"><title>Warehouse Plans | hms-mirror</title><script type="application/json" id="virtual-toc-data">[{"id":"standard-locations","level":0,"title":"Standard Locations","anchor":"#standard-locations"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b575/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Warehouse Plans | hms-mirror"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="hms-mirror Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/hms-mirror/v2.2.0.x/warehouse-plans.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Warehouse Plans | hms-mirror"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/hms-mirror/v2.2.0.x/warehouse-plans.html#webpage",
    "url": "writerside-documentation/hms-mirror/v2.2.0.x/warehouse-plans.html",
    "name": "Warehouse Plans | hms-mirror",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/hms-mirror/#website",
    "url": "writerside-documentation/hms-mirror/",
    "name": "hms-mirror Help"
}</script><!-- End Schema.org --></head><body data-id="Warehouse-Plans" data-main-title="Warehouse Plans" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Databases.md|Databases"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>hms-mirror v2.2.0.x Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Warehouse-Plans" id="Warehouse-Plans.md">Warehouse Plans</h1><p id="-phjfpf_3">Warehouse Plans are the way you can control how 'each' Database is translated between clusters or storage environments. Warehouse plans allow you to control where the data will be translated to.</p><p id="-phjfpf_4">There are three types of 'Warehouse Plans'.</p><ul class="list _bullet" id="-phjfpf_5"><li class="list__item" id="-phjfpf_10"><p>Global</p></li><li class="list__item" id="-phjfpf_11"><p>Per Database</p></li><li class="list__item" id="-phjfpf_12"><p>Environment</p></li></ul><p id="-phjfpf_6">When you choose to 'ALIGN' your datasets during the migration (See <a href="location-alignment.html" id="-phjfpf_13" data-tooltip="In the Hive Metastore, Database definitions, Table Schemas, and Partition details include the location of their datasets. These locations contain a full URI to the dataset. Migrating from one cluster to another requires us to make adjustments to these locations.">Location Alignment</a> for settings that are applicable for each strategy), we'll evaluate the warehouse plans to determine where each dataset should land. If you're using 'SQL' to move data, we'll build the schema's and sql that will make the adjustments required to reorganize the data based on the warehouse plan that is found.</p><p id="-phjfpf_7">It's recommended to define a warehouse plan for each <span class="control" id="-phjfpf_14">database</span> you want to move when you're using the 'ALIGNED' data movement strategy. When this is defined for the database, we'll inspect the all the current locations of tables and partitions in that dataset and make the necessary adjustments to locations.</p><p id="-phjfpf_8">The 'Warehouse Plans' get converted into 'Global Location Maps' that are inspected during processing to make that conversion.</p><section class="chapter"><h2 id="standard-locations" data-toc="standard-locations">Standard Locations</h2><p id="-phjfpf_15">When you choose to <span class="control" id="-phjfpf_17">ALIGN</span> the datasets, you are choosing to collect everything in the dataset/database under the same location as you've defined in the <span class="control" id="-phjfpf_18">warehouse plan</span>. When you choose <code class="code" id="-phjfpf_19">DISTCP</code> as the movement plan for <code class="code" id="-phjfpf_20">ALIGNED</code>, we'll build a distcp plan that will make those translations. <span class="control" id="-phjfpf_21">BUT</span>, there are some restrictions to this.</p><p id="-phjfpf_16">When you choose to use non-standard locations for 'partition specs', we can't build a proper <code class="code" id="-phjfpf_22">distcp</code> plan. In this case we will throw an 'error' for the offending table and describe to imbalance. You can either fix/adjust the dataset OR choose to use the <code class="code" id="-phjfpf_23">SQL</code> data movement strategy.</p></section><div class="last-modified">Last modified: 25 January 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="databases.html" class="navigation-links__prev">Databases</a><a href="global-warehouse-plans.html" class="navigation-links__next">Global Warehouse Plans</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b575/app.js"></script></body></html>