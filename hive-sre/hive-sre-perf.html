<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex">  <meta name="built-on" content="2023-11-07T07:59:38.259132"><meta name="build-number" content="${buildNumber}">       <title>Hive JDBC Performance Testing Tool (perf) | hive-sre</title><script id="virtual-toc-data" type="application/json">[]</script><script id="topic-shortcuts" type="application/json"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.1.5-b176/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Hive JDBC Performance Testing Tool (perf) | hive-sre"/><meta property="og:description" content=""/><meta property="og:image" content=""/><meta property="og:site_name" content="hive-sre Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="hive-srehive-sre-perf.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Hive JDBC Performance Testing Tool (perf) | hive-sre"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "hive-srehive-sre-perf.html#webpage", "url": "hive-srehive-sre-perf.html", "name": "Hive JDBC Performance Testing Tool (perf) | hive-sre", "description": "", "image": "", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "hive-sre/#website", "url": "hive-sre/", "name": "hive-sre Help" }</script><!-- End Schema.org --> <!-- Mermaid light/dark themes -->  <link rel="stylesheet" type="text/css" href="mermaid.css">  </head>     <body data-id="hive-sre-perf" data-main-title="Hive JDBC Performance Testing Tool (perf)" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs="hive-sre.md|Introduction///hive-sre-Sub-Commands.md|Sub-Commands"  >   <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>hive-sre  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="hive-sre-perf"  id="hive-sre-perf.md"  >Hive JDBC Performance Testing Tool (perf)</h1>  <p id="6d526d00_4471">The <code class="code" id="6d526d00_4472">perf</code> sub-command is used to check the throughput of a JDBC connection.</p><p id="6d526d00_4473">JDBC Performance Testing tool. Will provide connection timing details and rolling windows of performance for long running queries. Details in the windows will show not only records but also an estimate of the data volume.</p><p id="6d526d00_4474"><span class="emphasis" id="6d526d00_4475">Example Output</span></p><div class="code-block" data-lang="none"         >
========== v.2.0.1-SNAPSHOT ===========
URL        : jdbc:hive2://os04.streever.local:2181,os05.streever.local:2181,os10.streever.local:2181/;serviceDiscoveryMode=zooKeeper;zooKeeperNamespace=hiveserver2;principal=hive/_HOST@STREEVER.LOCAL
Batch Size : 10000
SQL        : SELECT field1_1,field1_2,field1_3,field1_4 FROM perf_test.wide_table
Lite       : false
----------------------------
Connect Attempt  : 0ms
Connected        : 2201ms
Create Statement : 2205ms
Before Query     : 2205ms
Query Return     : 2697ms
Start Iterating Results   : 2698ms
Completed Iterating Results: 79408ms
Statement Closed           : 79452ms
Resultset Closed           : 79452ms
Process Completed          : 79471ms

----------------------------
Window Length(ms) | Record Average | Records per/sec | Data Size per/sec
60000		7710000		128500		14970260
180000		10020000		125250		14642405
300000		10020000		125250		14642405
600000		10020000		125250		14642405

===========================
Running for: 80966ms		Started: 2020-03-06 13:57:40.492		Record Count: 10020000		Data Size: 1171392406
</div><p id="6d526d00_4477"><span class="control" id="6d526d00_4478">Environment and Connection via Knox</span></p><p id="6d526d00_4479"><span class="emphasis" id="6d526d00_4480">Example</span> Note: The additional <code class="code" id="6d526d00_4481">cp</code> setting with <code class="code" id="6d526d00_4482">hadoop classpath</code> is required when connecting to a Kerberized endpoint.</p><div class="code-block" data-lang="none"         >
URL=&quot;jdbc:hive2://os06.streever.local:8443/;ssl=true;sslTrustStore=/home/dstreev/certs/bm90-gateway.jks;trustStorePassword=hortonworks;transportMode=http;httpPath=gateway/default/hive&quot;
QUERY=&quot;SELECT field1_1,field1_2,field1_3,field1_4 FROM perf_test.wide_table&quot;
BATCH_SIZE=10000
PW=&lt;set_me&gt;

hive-sre perf -u &quot;${URL}&quot; -e &quot;${QUERY}&quot; -b $BATCH_SIZE -n ${USER} -p &lt;password&gt; 
</div><p id="6d526d00_4484"><span class="control" id="6d526d00_4485">Environment and Connection via Kerberos from Edge</span></p><p id="6d526d00_4486"><span class="emphasis" id="6d526d00_4487">Example</span> Note: Additional hadoop libraries are required for a kerberized connection. Use <code class="code" id="6d526d00_4488">--hadoop-classpath</code> in the commandline to call the environments hadoop classpath and add it to the <code class="code" id="6d526d00_4489">cp</code> of the application.</p><div class="code-block" data-lang="none"         >
URL=&quot;jdbc:hive2://os05.streever.local:10601/default;httpPath=cliservice;principal=hive/_HOST@STREEVER.LOCAL;transportMode=http&quot;
QUERY=&quot;SELECT field1_1,field1_2,field1_3,field1_4 FROM perf_test.wide_table&quot;
# Note that `hadoop classpath` statement to bring in all necessary libs.
BATCH_SIZE=10000

hive-sre --hadoop-classpath perf -u &quot;${URL}&quot; -e &quot;${QUERY}&quot; -b $BATCH_SIZE 
</div><p id="6d526d00_4491"><span class="control" id="6d526d00_4492">Environment and Connection via Kerberos from a Client Host (Non-Edge)</span></p><p id="6d526d00_4493">Even with a valid Kerberos ticket, this type of host will not have all the <code class="code" id="6d526d00_4494">hadoop</code> libs we get from <code class="code" id="6d526d00_4495">hadoop classpath</code> to work. I have not yet been able to find the right mix of classes to add to the 'uber' jar to get this working.</p><div class="last-modified"> Last modified: 07 November 2023</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">  <a class="navigation-links__prev" href="hive-sre-sre.html">SRE Application (sre)</a>   <a class="navigation-links__next" href="hive-sre-pre-requisites.html">Pre-Requisites</a>  </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/writerside/apidoc/6.1.5-b176/app.js"></script></body></html>