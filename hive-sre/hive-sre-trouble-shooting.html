<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex">  <meta name="built-on" content="2023-11-07T08:04:35.894986"><meta name="build-number" content="${buildNumber}">       <title>Troubleshooting | hive-sre</title><script id="virtual-toc-data" type="application/json">[{"id":"kerberos-connectivity-issues","level":0,"title":"Kerberos Connectivity Issues","anchor":"#kerberos-connectivity-issues"},{"id":"setting-up-java-home","level":0,"title":"Setting up $JAVA_HOME","anchor":"#setting-up-java-home"},{"id":"setting-an-alternate-hadoop-conf-dir","level":0,"title":"Setting an alternate HADOOP_CONF_DIR","anchor":"#setting-an-alternate-hadoop-conf-dir"},{"id":"java-sql-sqlexception-the-server-time-zone-value-is-unrecognized-or-represents-more-than-one-time-zone","level":0,"title":"java.sql.SQLException: The server time zone value \u0027***\u0027 is unrecognized or represents more than one time zone.","anchor":"#java-sql-sqlexception-the-server-time-zone-value-is-unrecognized-or-represents-more-than-one-time-zone"},{"id":"no-progress-exception","level":0,"title":"\u0027No Progress Exception\u0027","anchor":"#no-progress-exception"}]</script><script id="topic-shortcuts" type="application/json"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.1.5-b176/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Troubleshooting | hive-sre"/><meta property="og:description" content=""/><meta property="og:image" content=""/><meta property="og:site_name" content="hive-sre Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="hive-srehive-sre-trouble-shooting.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Troubleshooting | hive-sre"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "hive-srehive-sre-trouble-shooting.html#webpage", "url": "hive-srehive-sre-trouble-shooting.html", "name": "Troubleshooting | hive-sre", "description": "", "image": "", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "hive-sre/#website", "url": "hive-sre/", "name": "hive-sre Help" }</script><!-- End Schema.org --> <!-- Mermaid light/dark themes -->  <link rel="stylesheet" type="text/css" href="mermaid.css">  </head>     <body data-id="hive-sre-trouble-shooting" data-main-title="Troubleshooting" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs=""  >   <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>hive-sre  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="hive-sre-trouble-shooting"  id="hive-sre-trouble-shooting.md"  >Troubleshooting</h1>  <section class="chapter"><h2 id="kerberos-connectivity-issues" data-toc="kerberos-connectivity-issues">Kerberos Connectivity Issues</h2><p id="ac06dc43_5257">Older JDK's that are a part of the environment <code class="code" id="ac06dc43_5258">PATH</code> may cause issues when connecting to the services. The following parameters will help debug those sessions.</p><p id="ac06dc43_5259">Add Kerberos Java debugging parameters to the commandline.</p><div class="code-block" data-lang="none"         >
hive-sre -Dsun.security.krb5.debug=true u3 -o sre-out
hive-sre -Dsun.security.krb5.debug=true sre -o sre-out
</div><p id="ac06dc43_5261">or</p><div class="code-block" data-lang="none"         >
hive-sre-cli -Dsun.security.krb5.debug=true
</div><p id="ac06dc43_5263">One thing to check, before debugging Kerberos is that you are able to connect with a basic <code class="code" id="ac06dc43_5264">hdfs dfs -ls /</code> hadoop cli command. If the environment is kerberized AND you have a valid ticket, the <code class="code" id="ac06dc43_5265">hdfs</code> command should work.</p><p id="ac06dc43_5266">Assuming that works and you are still having issues with <code class="code" id="ac06dc43_5267">hive-sre</code>, than check that you are running the same JDK for <code class="code" id="ac06dc43_5268">hive-sre</code> as is setup for the <code class="code" id="ac06dc43_5269">hdfs</code> cli.</p><p id="ac06dc43_5270">Our <code class="code" id="ac06dc43_5271">hdfs</code> client implementation used in <code class="code" id="ac06dc43_5272">hive-sre</code> requires the authenticated user to have a HOME directory in <code class="code" id="ac06dc43_5273">hdfs</code>. IE: If your prinicipal is for <code class="code" id="ac06dc43_5274">david</code> then there should be an hdfs directory <code class="code" id="ac06dc43_5275">/user/david</code>. If there isn't a user HOME directory in HDFS, the application may hang on initialization.</p><p id="ac06dc43_5276">The application will display the JDK version at startup. Use this to confirm.</p></section><section class="chapter"><h2 id="setting-up-java-home" data-toc="setting-up-java-home">Setting up $JAVA_HOME</h2><p id="ac06dc43_5277">If the 'default' jdk isn't the one being used by the cluster, set the <code class="code" id="ac06dc43_5278">$JAVA_HOME</code> environment variable BEFORE starting <code class="code" id="ac06dc43_5279">hive-sre</code>. When this is set, <code class="code" id="ac06dc43_5280">hive-sre</code> will use that JDK.</p></section><section class="chapter"><h2 id="setting-an-alternate-hadoop-conf-dir" data-toc="setting-an-alternate-hadoop-conf-dir">Setting an alternate HADOOP_CONF_DIR</h2><p id="ac06dc43_5281">By default, 'hive-sre' uses the <code class="code" id="ac06dc43_5282">/etc/hadoop/conf</code> directory to locate the environment configurations. If you have an alternate directory, you can override this by setting the env variable <code class="code" id="ac06dc43_5283">HADOOP_CONF_DIR</code>.</p><div class="code-block" data-lang="none"         >
export HADOOP_CONF_DIR=/my/hadoop/conf_dir
</div><p id="ac06dc43_5285">If you see the following message, it means the needed configurations we not found.</p><div class="code-block" data-lang="none"         >
Invalid URI for NameNode address (check fs.defaultFS): file:/// has no authority. cmd:org.apache.commons.cli.CommandLine...
</div><p id="ac06dc43_5287">Ideally, the host should be configured as an <span class="control" id="ac06dc43_5288">HDFS Gateway</span> in Cloudera Manager.</p></section><section class="chapter"><h2 id="java-sql-sqlexception-the-server-time-zone-value-is-unrecognized-or-represents-more-than-one-time-zone" data-toc="java-sql-sqlexception-the-server-time-zone-value-is-unrecognized-or-represents-more-than-one-time-zone">java.sql.SQLException: The server time zone value '***' is unrecognized or represents more than one time zone.</h2><p id="ac06dc43_5289">This happens when running against <span class="emphasis" id="ac06dc43_5290">MySQL</span> and there is a translation issue with the timezone set on the server. Override this with the client by adding the following to the jdbc connection url: <code class="code" id="ac06dc43_5291">serverTimezone=UTC</code>.</p><p id="ac06dc43_5292">For example: <code class="code" id="ac06dc43_5293">jdbc:mysql://m01.streever.local:3306/hive_50?serverTimezone=UTC</code></p></section><section class="chapter"><h2 id="no-progress-exception" data-toc="no-progress-exception">'No Progress Exception'</h2><p id="ac06dc43_5294">This happens when a connection is usually made but the application fails to make progress initializing. The check was added for certain scenarios that hung the application indefinitely.</p><p id="ac06dc43_5295">Under some conditions, the connection may take a bit longer to establish and this process kicks in and kills the application. Sometimes a &quot;High-Availability&quot; RDBMS might have just enough of a delay to trigger this process. In that case, you can extend the time given for the check by adding:</p><p id="ac06dc43_5296"><code class="code" id="ac06dc43_5297">reportingInterval: 1000</code></p><p id="ac06dc43_5298">to the configuration yaml file. Add it before or after the <code class="code" id="ac06dc43_5299">parallelism</code> setting at the level indent level.</p></section><div class="last-modified"> Last modified: 07 November 2023</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">  <a class="navigation-links__prev" href="hive-sre-tips.html">Tips</a>   <a class="navigation-links__next" href="hive-sre-sample-reports.html">Sample Reports</a>  </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/writerside/apidoc/6.1.5-b176/app.js"></script></body></html>